import{r as a,a as M,b as h,h as z,i as A,k as G,l as H,m as I,n as J,j as u,L as N,o as k}from"./index-ASdjluUE.js";import{u as x,g as w,r as R,q,o as T,a as B,b as U,F as W,P as X,L as Y}from"./usePrevios-C1Te-ORh.js";const ss=({location:e,setCount:K,countFavorites:c})=>{const[s,m]=a.useState(null),[O,P]=a.useState(!1),t=M(),o=h(z),r=h(A),D=h(G),E=h(H),b=3,d=x(s),y=d==null?void 0:d.value,p=s==null?void 0:s.value,l=x(e),g=x(c);a.useEffect(()=>{r.length===0&&E.length>0?P(!0):P(!1)},[r,E]),a.useEffect(()=>{l!==e&&t(I({favoritesPsychologists:r,favoritesShow:D,favoritesPage:o}))},[l,e,t,r,D,o,d,m]);const S=a.useCallback(()=>{const n=w(),j=R(n),f=q(j,T());(o===0||g!==c)&&B(f,v=>{const i=v.val();console.log(i),i.length&&t(k(i)),console.log(g,c),console.log("getData end")})},[t,o,g,c]),C=a.useCallback(()=>{const n=w(),j=R(n),f=[];if(console.log(y+"==>"+p),y!==p&&l===e||g!==c){const v=Object.values(s)[0].split(" ")[0],i=Object.values(s)[0].split(" ")[1];console.log(i);const Q=q(j,U(v));B(Q,V=>{V.forEach(L=>{const $=L.key,F=L.val();console.log(`${$} : ${F[v]}`),f.push(F)}),i&&f.reverse(),console.log(f),t(k(f))})}},[t,s,y,p,l,e,g,c]);return a.useEffect(()=>{s?C():S()},[S,C,s]),a.useEffect(()=>{if(r.length&&l===e){const n=r.slice(o*b,o*b+b);t(J(n))}},[r,o,t,l,e]),u.jsxs(u.Fragment,{children:[O&&u.jsx(N,{}),u.jsx(W,{selectedOption:s,setSelectedOption:m}),u.jsx(X,{location:e,setCountFavorites:K}),u.jsx(Y,{location:e})]})};export{ss as default};
