import{j as _,r as y,p as Di,q as Bl,t as Pt,v as ql,w as zl,S as Io,a as xo,b as je,l as To,x as Gl,y as Yl,c as Oo,k as Po,d as Kl,i as Ql,z as Xl,A as Zl,B as Jl,R as rs,C as ec,D as C,E as Jt,_ as tc,F as nc,G as ic,H as rc,I as sc,J as oc,K as ss,M as he,N as or,O as Ve,P as ac,Q as lc,T as cc,U as Ct,V as In,W as ar,X as en,Y as Gn,Z as uc,$ as Ro,a0 as No,a1 as dc,a2 as hc,a3 as os,a4 as ko,a5 as fc,a6 as pc,a7 as mc,a8 as gc,a9 as vc}from"./index-xpjJ_wRV.js";function _c(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}const yc=t=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:26,height:26,fill:"none",...t,children:_.jsx("path",{stroke:"#191A15",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M22.577 4.994a5.959 5.959 0 0 0-8.429 0L13 6.142l-1.148-1.148a5.96 5.96 0 1 0-8.429 8.428l1.149 1.149L13 22.999l8.428-8.428 1.149-1.149a5.96 5.96 0 0 0 0-8.428Z"})}),bc=t=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",...t,children:[_.jsx("circle",{cx:7,cy:7,r:7,fill:"#FBFBFB"}),_.jsx("circle",{cx:7,cy:7,r:4.667,fill:"#38CD3E"})]}),Mo=t=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t,children:[_.jsx("g",{clipPath:"url(#a)",children:_.jsx("path",{fill:"#FFC531",stroke:"#FFC531",strokeWidth:1.2,d:"M6.2 4.697 8 1.286l1.8 3.411c.159.302.45.512.785.57l3.8.658-2.688 2.766a1.1 1.1 0 0 0-.3.923l.55 3.818-3.462-1.702a1.1 1.1 0 0 0-.97 0l-3.462 1.702.55-3.818a1.1 1.1 0 0 0-.3-.923L1.614 5.925l3.8-.657a1.1 1.1 0 0 0 .786-.571Z"})}),_.jsx("defs",{children:_.jsx("clipPath",{id:"a",children:_.jsx("path",{fill:"#fff",d:"M0 0h16v16H0z"})})})]}),Cc="_card_a6vgc_1",wc="_cardImgWrap_a6vgc_37",Sc="_svgOnline_a6vgc_59",Ec="_cardImg_a6vgc_37",Ic="_cardInfo_a6vgc_75",xc="_psychologist_a6vgc_109",Tc="_cardInfoList_a6vgc_121",Oc="_cardInfoItem_a6vgc_143",Pc="_cardInfoText_a6vgc_193",Rc="_price_a6vgc_215",Nc="_heart_a6vgc_221",kc="_svgHeart_a6vgc_235",Mc="_name_a6vgc_247",Ac="_qualityList_a6vgc_275",Lc="_qualityRow_a6vgc_287",Dc="_quality_a6vgc_275",Fc="_qualityName_a6vgc_319",Vc="_qualityText_a6vgc_325",jc="_about_a6vgc_333",$c="_readMore_a6vgc_343",Wc="_readMoreButton_a6vgc_351",D={card:Cc,cardImgWrap:wc,svgOnline:Sc,cardImg:Ec,cardInfo:Ic,psychologist:xc,cardInfoList:Tc,cardInfoItem:Oc,cardInfoText:Pc,price:Rc,heart:Nc,svgHeart:kc,name:Mc,qualityList:Ac,qualityRow:Lc,quality:Dc,qualityName:Fc,qualityText:Vc,about:jc,readMore:$c,readMoreButton:Wc},Hc="_commentList_ukui0_1",Uc="_reviewer_ukui0_21",Bc="_reviewerImg_ukui0_33",qc="_avatar_ukui0_45",zc="_letter_ukui0_59",Gc="_name_ukui0_71",Yc="_rating_ukui0_79",Kc="_comment_ukui0_1",Qc="_appointment_ukui0_103",Ke={commentList:Hc,reviewer:Uc,reviewerImg:Bc,avatar:qc,letter:zc,name:Gc,rating:Yc,comment:Kc,appointment:Qc},Xc="_overlay_1aox4_1",Zc="_modal_1aox4_25",Jc="_CloseBtn_1aox4_63",eu="_closeButton_1aox4_81",tu="_title_1aox4_91",nu="_text_1aox4_133",iu="_psychologistwrap_1aox4_167",ru="_psychologistImg_1aox4_189",su="_psychologistInfo_1aox4_201",ou="_yourPsychologist_1aox4_211",au="_name_1aox4_223",lu="_form_1aox4_235",cu="_input_1aox4_247",uu="_time_1aox4_293",du="_error_1aox4_309",hu="_box_1aox4_321",fu="_inputBox_1aox4_353",pu="_textarea_1aox4_367",mu="_button_1aox4_413",W={overlay:Xc,modal:Zc,CloseBtn:Jc,closeButton:eu,title:tu,text:nu,psychologistwrap:iu,psychologistImg:ru,psychologistInfo:su,yourPsychologist:ou,name:au,form:lu,input:cu,time:uu,error:du,box:hu,inputBox:fu,textarea:pu,button:mu};function as(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?as(Object(n),!0).forEach(function(i){Ao(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):as(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gu(t){var e=function(n,i){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var s=r.call(n,i||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}(t,"string");return typeof e=="symbol"?e:e+""}function Ao(t,e,n){return(e=gu(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vu(t,e){if(t==null)return{};var n,i,r=function(o,l){if(o==null)return{};var a,c,u={},d=Object.keys(o);for(c=0;c<d.length;c++)a=d[c],l.indexOf(a)>=0||(u[a]=o[a]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ls(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Lo(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(a,c){if(a){if(typeof a=="string")return ls(a,c);var u=Object.prototype.toString.call(a).slice(8,-1);return u==="Object"&&a.constructor&&(u=a.constructor.name),u==="Map"||u==="Set"?Array.from(a):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?ls(a,c):void 0}}(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(a){throw a},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var a=n.next();return o=a.done,a},e:function(a){l=!0,s=a},f:function(){try{o||n.return==null||n.return()}finally{if(l)throw s}}}}function yi(t,e){var n,i=e.replacementChars,r=e.replacement,s=e.separate,o=i,l="",a=Lo(t);try{for(a.s();!(n=a.n()).done;){var c,u=n.value,d=!Object.prototype.hasOwnProperty.call(r,u)&&((c=r[o[0]])===null||c===void 0?void 0:c.test(u));(s&&u===o[0]||d)&&(o=o.slice(1),l+=u)}}catch(h){a.e(h)}finally{a.f()}return l}function Vi(t){return t.length>0?Ao({},t,/./):{}}function _u(t,e){var n,i=e.mask,r=e.replacement,s=e.showMask,o=0,l="",a=Lo(i);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(!s&&t[o]===void 0)break;Object.prototype.hasOwnProperty.call(r,c)&&t[o]!==void 0?l+=t[o++]:l+=c}}catch(u){a.e(u)}finally{a.f()}return l}function yu(t,e){for(var n=e.mask,i=e.replacement,r=[],s=0;s<n.length;s++){var o,l=(o=t[s])!==null&&o!==void 0?o:n[s],a=Object.prototype.hasOwnProperty.call(i,l)?"replacement":t[s]!==void 0&&t[s]!==n[s]?"input":"mask";r.push({type:a,value:l,index:s})}return r}function cs(t,e){for(var n=e.start,i=n===void 0?0:n,r=e.end,s=e.mask,o=e.replacement,l=e.separate,a=t.slice(i,r),c=s.slice(i,r),u="",d=0;d<c.length;d++){var h=Object.prototype.hasOwnProperty.call(o,c[d]);h&&a[d]!==void 0&&a[d]!==c[d]?u+=a[d]:h&&l&&(u+=c[d])}return u}function us(t){for(var e=t.mask,n=t.replacement,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=typeof n=="string"?Vi(n):n,s=["[","]","\\","/","^","$",".","|","?","*","+","(",")","{","}"],o="",l=0;l<e.length;l++){var a=Object.prototype.hasOwnProperty.call(r,e[l]),c=i?"(?!".concat(e[l],")"):"";l===0&&(o+="^"),o+=a?"".concat(c,"(").concat(r[e[l]].toString().slice(1,-1),")"):s.includes(e[l])?"\\".concat(e[l]):e[l],l===e.length-1&&(o+="$")}return o}function bu(t,e,n){return e=Ht(e),function(i,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(i)}(t,lr()?Reflect.construct(e,n||[],Ht(t).constructor):e.apply(t,n))}function lr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lr=function(){return!!t})()}function ji(t){return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(t)}function Cu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wu(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Su(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ut(t,e)}function Ht(t){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(t)}function Ut(t,e){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ut(t,e)}function $i(t){var e=typeof Map=="function"?new Map:void 0;return $i=function(n){if(n===null||!function(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return function(r,s,o){if(lr())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,s);var a=new(r.bind.apply(r,l));return o&&Ut(a,o.prototype),a}(n,arguments,Ht(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ut(i,n)},$i(t)}var vt=function(t){function e(n,i){var r;return Cu(this,e),(r=bu(this,e,[n])).name="SyntheticChangeError",r.cause=i,r}return Su(e,t),wu(e)}($i(Error));function Eu(t,e){return y.useCallback(function(n){t.current=n,typeof e=="function"?e(n):ji(e)==="object"&&e!==null&&(e.current=n)},[t,e])}function un(t,e){var n=e.value,i=e.selectionStart,r=e.selectionEnd;n!==void 0&&(t.value=n),i!==void 0&&r!==void 0&&t.setSelectionRange(i,r)}var Iu=["text","email","tel","search","url"];function xu(t){var e=t.init,n=t.tracking,i=t.eventType,r=t.eventHandler,s=y.useRef({timeoutId:-1,fallbackTimeoutId:-1,cachedTimeoutId:-1,start:0,end:0}),o=y.useRef(!0),l=y.useRef(null),a=y.useRef({init:e,tracking:n,eventType:i,eventHandler:r});return a.current.init=e,a.current.tracking=n,a.current.eventType=i,a.current.eventHandler=r,y.useMemo(function(){return function(c,u,d){var h=d.onFocus,f=d.onBlur,p=d.onInput;return new Proxy(c,{set:function(v,m,g){if(m!=="current")return!1;var b=g!==null&&Iu.includes(g.type);if(g!==c.current&&(c.current!==null&&(c.current.removeEventListener("focus",h),c.current.removeEventListener("blur",f),c.current.removeEventListener("input",p)),g!==null&&b)){var w,I=(w=g._wrapperState)!==null&&w!==void 0?w:{},S=I.controlled,T=S!==void 0&&S,E=I.initialValue,x=E===void 0?"":E,L=u({controlled:T,initialValue:g.value||x});un(g,{value:L.value}),document.activeElement===g&&h(),g.addEventListener("focus",h),g.addEventListener("blur",f),g.addEventListener("input",p)}return v[m]=g,!0}})}(l,a.current.init,{onFocus:function(){s.current.timeoutId=window.setTimeout(function c(){var u,d,h,f;o.current?(s.current.start=(u=(d=l.current)===null||d===void 0?void 0:d.selectionStart)!==null&&u!==void 0?u:0,s.current.end=(h=(f=l.current)===null||f===void 0?void 0:f.selectionEnd)!==null&&h!==void 0?h:0,s.current.timeoutId=window.setTimeout(c)):s.current.fallbackTimeoutId=window.setTimeout(c)})},onBlur:function(){window.clearTimeout(s.current.timeoutId),window.clearTimeout(s.current.fallbackTimeoutId),s.current.timeoutId=-1,s.current.fallbackTimeoutId=-1,s.current.cachedTimeoutId=-1},onInput:function(c){var u=l.current;if(u!==null)try{var d,h,f,p,v;if(s.current.cachedTimeoutId===s.current.timeoutId)throw new vt("The input selection has not been updated.");s.current.cachedTimeoutId=s.current.timeoutId;var m=u.value,g=u.selectionStart,b=u.selectionEnd;if(g===null||b===null)throw new vt("The selection attributes have not been initialized.");var w,I=(d=(h=u._valueTracker)===null||h===void 0||(f=h.getValue)===null||f===void 0?void 0:f.call(h))!==null&&d!==void 0?d:"";if(g>s.current.start?w="insert":g<=s.current.start&&g<s.current.end?w="deleteBackward":g===s.current.end&&m.length<I.length&&(w="deleteForward"),w===void 0||(w==="deleteBackward"||w==="deleteForward")&&m.length>I.length)throw new vt("Input type detection error.");var S="",T="",E=s.current.start,x=s.current.end;if(w==="insert")S=m.slice(s.current.start,g);else{var L=I.length-m.length;E=g,x=g+L,T=I.slice(E,x)}var B=a.current.tracking({inputType:w,previousValue:I,value:m,addedValue:S,deletedValue:T,changeStart:E,changeEnd:x,selectionStart:g,selectionEnd:b});un(u,{value:B.value,selectionStart:B.selectionStart,selectionEnd:B.selectionEnd});var ee=a.current.eventType,Z=a.current.eventHandler;if(typeof ee=="string"&&Z){var ce=u.value,be=u.selectionStart,Y=u.selectionEnd;o.current=!1,requestAnimationFrame(function(){un(u,{value:ce,selectionStart:be??ce.length,selectionEnd:Y??ce.length});var xe=new CustomEvent(ee,{bubbles:!0,cancelable:!1,composed:!0,detail:B.__detail});u.dispatchEvent(xe),Di.unstable_batchedUpdates?Di.unstable_batchedUpdates(Z,xe):Z(xe),o.current=!0})}(p=u._valueTracker)===null||p===void 0||(v=p.setValue)===null||v===void 0||v.call(p,I),s.current.start=B.selectionStart,s.current.end=B.selectionEnd}catch(xe){var q,ne,ae,ge,Ce,Re,$,ie,K,re,Q,se=xe,pe=se.name,X=se.cause;if(un(u,{value:(q=(ne=X==null||(ae=X.__attributes)===null||ae===void 0?void 0:ae.value)!==null&&ne!==void 0?ne:(ge=u._valueTracker)===null||ge===void 0||(Ce=ge.getValue)===null||Ce===void 0?void 0:Ce.call(ge))!==null&&q!==void 0?q:"",selectionStart:(Re=X==null||($=X.__attributes)===null||$===void 0?void 0:$.selectionStart)!==null&&Re!==void 0?Re:s.current.start,selectionEnd:(ie=X==null||(K=X.__attributes)===null||K===void 0?void 0:K.selectionEnd)!==null&&ie!==void 0?ie:s.current.end}),(X==null||(re=X.__attributes)===null||re===void 0?void 0:re.selectionStart)!==void 0&&(s.current.start=X.__attributes.selectionStart),(X==null||(Q=X.__attributes)===null||Q===void 0?void 0:Q.selectionEnd)!==void 0&&(s.current.end=X.__attributes.selectionEnd),c.preventDefault(),c.stopPropagation(),pe!=="SyntheticChangeError")throw xe}}})},[])}function Do(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mask,n=e===void 0?"":e,i=t.replacement,r=i===void 0?{}:i,s=t.showMask,o=s!==void 0&&s,l=t.separate,a=l!==void 0&&l,c=t.track,u=t.modify,d=t.onMask,h=typeof r=="string"?Vi(r):r,f=y.useRef(null);return xu({init:function(p){var v=p.controlled,m=p.initialValue;m=v||m?m:o?n:"";var g={mask:n,replacement:h,showMask:o,separate:a};return f.current={value:m,props:g,fallbackProps:g},{value:m}},tracking:function(p){var v,m=p.inputType,g=p.previousValue,b=p.addedValue,w=p.changeStart,I=p.changeEnd;if(f.current===null)throw new vt("The state has not been initialized.");f.current.value!==g?f.current.props=f.current.fallbackProps:f.current.fallbackProps=f.current.props;var S=cs(g,{end:w,mask:f.current.props.mask,replacement:f.current.props.replacement,separate:f.current.props.separate}),T=RegExp("[^".concat(Object.keys(f.current.props.replacement).join(""),"]"),"g"),E=f.current.props.mask.replace(T,"");S&&(S=yi(S,{replacementChars:E,replacement:f.current.props.replacement,separate:f.current.props.separate}));var x=c==null?void 0:c(Fi(Fi({},m==="insert"?{inputType:m,data:b}:{inputType:m,data:null}),{},{value:g,selectionStart:w,selectionEnd:I}));if(x===!1)throw new vt("Custom trekking stop.");if(x===null?b="":x!==!0&&x!==void 0&&(b=x),b&&(b=yi(b,{replacementChars:E.slice(S.length),replacement:f.current.props.replacement,separate:!1})),m==="insert"&&b==="")throw new vt("The character does not match the key value of the `replacement` object.");var L=cs(g,{start:I,mask:f.current.props.mask,replacement:f.current.props.replacement,separate:f.current.props.separate});if(f.current.props.separate){var B=f.current.props.mask.slice(w,I).replace(T,""),ee=B.length-b.length;ee<0?L=L.slice(-ee):ee>0&&(L=B.slice(-ee)+L)}L&&(L=yi(L,{replacementChars:E.slice(S.length+b.length),replacement:f.current.props.replacement,separate:f.current.props.separate}));var Z=S+b+L,ce=(v=u==null?void 0:u(Z))!==null&&v!==void 0?v:{},be=ce.mask,Y=be===void 0?n:be,q=ce.replacement,ne=q===void 0?h:q,ae=ce.showMask,ge=ae===void 0?o:ae,Ce=ce.separate,Re=Ce===void 0?a:Ce;typeof ne=="string"&&(ne=Vi(ne));var $=function(K,re){var Q=re.mask,se=re.replacement,pe=re.showMask,X=_u(K,{mask:Q,replacement:se,showMask:pe}),xe=yu(X,{mask:Q,replacement:se}),Ye=us({mask:Q,replacement:se}),ut=us({mask:Q,replacement:se},!0);return{value:X,input:K,parts:xe,pattern:Ye,isValid:RegExp(ut).test(X)}}(Z,{mask:Y,replacement:ne,showMask:ge}),ie=function(K){var re,Q,se,pe=K.inputType,X=K.value,xe=K.addedValue,Ye=K.beforeChangeValue,ut=K.parts,vi=K.replacement,cn=K.separate,Ot=ut.filter(function(_i){var is=_i.type;return is==="input"||cn&&is==="replacement"}),ts=(re=Ot[Ye.length+xe.length-1])===null||re===void 0?void 0:re.index,dt=(Q=Ot[Ye.length-1])===null||Q===void 0?void 0:Q.index,ht=(se=Ot[Ye.length+xe.length])===null||se===void 0?void 0:se.index;if(pe==="insert"){if(ts!==void 0)return ts+1;if(ht!==void 0)return ht;if(dt!==void 0)return dt+1}if(pe==="deleteForward"){if(ht!==void 0)return ht;if(dt!==void 0)return dt+1}if(pe==="deleteBackward"){if(dt!==void 0)return dt+1;if(ht!==void 0)return ht}var ns=X.split("").findIndex(function(_i){return Object.prototype.hasOwnProperty.call(vi,_i)});return ns!==-1?ns:X.length}({inputType:m,value:$.value,addedValue:b,beforeChangeValue:S,parts:$.parts,replacement:ne,separate:Re});return f.current.value=$.value,f.current.props={mask:Y,replacement:ne,showMask:ge,separate:Re},{value:$.value,selectionStart:ie,selectionEnd:ie,__detail:$}},eventType:"input-mask",eventHandler:d})}var Tu=["component","mask","replacement","showMask","separate","track","modify","onMask"];function Ou(t,e){var n=t.component,i=t.mask,r=t.replacement,s=t.showMask,o=t.separate,l=t.track,a=t.modify,c=t.onMask,u=vu(t,Tu),d=Do({mask:i,replacement:r,showMask:s,separate:o,track:l,modify:a,onMask:c}),h=Eu(d,e);return _.jsx(n||"input",Fi({ref:h},u))}y.forwardRef(Ou);const Pu=Bl({name:Pt().max(32,"The name must contain a maximum of 32 characters").required("The name is required"),email:Pt().email("Please write a valid email").matches(/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/,"Please write a valid email").required("The email is required"),tel:Pt().min(12,"The phone must contain a minimum of 12 characters"),time:Pt().notOneOf(["00:00"],"Please specify the time").required("The time is required"),comment:Pt().required("The comment is required")}),Ru=({close:t,name:e,avatar_url:n})=>{var m,g,b,w,I;const[i,r]=y.useState("00:00"),[s,o]=y.useState("+380"),{register:l,handleSubmit:a,formState:{errors:c}}=ql({mode:"onChange",resolver:zl(Pu)});function u(S){console.log(S),console.log(d),alert(`You made the appointment with ${e} at ${S.time}`)}const d=Do({mask:"+380 (__) ___-__-__",replacement:{_:/\d/}});function h(S){S.target===S.currentTarget&&t()}document.addEventListener("keydown",f);function f(S){S.code==="Escape"&&(t(),document.removeEventListener("keydown",f))}function p(S){r(S.target.value)}function v(S){o(S.target.value)}return _.jsx("div",{className:W.overlay,onClick:h,children:_.jsxs("div",{className:W.modal,children:[_.jsx("button",{className:W.CloseBtn,onClick:t,"aria-label":"close",children:_.jsx(Io,{})}),_.jsx("h2",{className:W.title,"data-appointment":"",children:"Make an appointment with a psychologists"}),_.jsx("p",{className:W.text,"data-appointment":"",children:"You are on the verge of changing your life for the better. Fill out the short form below to book your personal appointment with a professional psychologist. We guarantee confidentiality and respect for your privacy."}),_.jsxs("div",{className:W.psychologistwrap,children:[_.jsx("img",{className:W.psychologistImg,src:n,alt:e,width:"44",height:"44"}),_.jsxs("div",{className:W.psychologistInfo,children:[_.jsx("p",{className:W.yourPsychologist,children:"Your psychologists"}),_.jsx("h3",{className:W.name,children:e})]})]}),_.jsxs("form",{className:W.form,onSubmit:a(u),children:[_.jsxs("div",{className:W.inputBox,children:[_.jsx("input",{className:W.input,...l("name"),type:"text",placeholder:"Name"}),_.jsx("span",{className:W.error,children:(m=c.name)==null?void 0:m.message})]}),_.jsxs("div",{className:W.box,children:[_.jsxs("div",{className:W.inputBox,children:[_.jsx("input",{className:W.input,...l("tel"),type:"text",placeholder:"+380",ref:d,value:s,onChange:v}),_.jsx("span",{className:W.error,children:(g=c.tel)==null?void 0:g.message})]}),_.jsxs("div",{className:W.inputBox,children:[_.jsx("input",{className:W.input+" "+W.time,...l("time"),type:"time",placeholder:"",value:i,onChange:p}),_.jsx("span",{className:W.error,children:(b=c.time)==null?void 0:b.message})]})]}),_.jsxs("div",{className:W.inputBox,children:[_.jsx("input",{className:W.input,...l("email"),type:"text",placeholder:"Email"}),_.jsx("span",{className:W.error,children:(w=c.email)==null?void 0:w.message})]}),_.jsxs("div",{className:W.inputBox,children:[_.jsx("textarea",{className:W.textarea,...l("comment"),placeholder:"Comment"}),_.jsx("span",{className:W.error,children:(I=c.comment)==null?void 0:I.message})]}),_.jsx("button",{className:W.button,type:"submit","aria-label":"Send",children:"Send"})]})]})})},Nu=({reviews:t,name:e,avatar_url:n})=>{const[i,r]=y.useState(!1);function s(){r(!0)}function o(){r(!1)}return y.useEffect(()=>{i?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[i]),_.jsxs(_.Fragment,{children:[i&&_.jsx(Ru,{close:o,name:e,avatar_url:n}),_.jsx("ul",{className:Ke.commentList,children:t.map(({comment:l,rating:a,reviewer:c},u)=>_.jsxs("li",{children:[_.jsxs("div",{className:Ke.reviewer,children:[_.jsx("div",{className:Ke.avatar,children:_.jsx("span",{className:Ke.letter,children:c.slice(0,1)})}),_.jsxs("div",{children:[_.jsx("h4",{className:Ke.name,children:c}),_.jsxs("p",{className:Ke.rating,children:[_.jsx(Mo,{}),a]})]})]}),_.jsx("p",{className:Ke.comment,children:l})]},u))}),_.jsx("button",{className:Ke.appointment,onClick:s,"aria-label":"Make an appointment",children:"Make an appointment"})]})},ku="_overlay_1ygar_1",Mu="_modal_1ygar_29",Au="_closeButton_1ygar_59",bi={overlay:ku,modal:Mu,closeButton:Au},Lu=({close:t})=>{function e(i){i.target===i.currentTarget&&t()}document.addEventListener("keydown",n);function n(i){i.code==="Escape"&&(t(),document.removeEventListener("keydown",n))}return _.jsx("div",{className:bi.overlay,onClick:e,children:_.jsxs("div",{className:bi.modal,children:[_.jsx("button",{className:bi.closeButton,onClick:t,"aria-label":"close",children:_.jsx(Io,{})}),_.jsx("h1",{children:"No access! For authorized users only!"})]})})},ds=({about:t,avatar_url:e,experience:n,initial_consultation:i,license:r,name:s,price_per_hour:o,rating:l,reviews:a,specialization:c,setCountFavorites:u})=>{const[d,h]=y.useState(!1),[f,p]=y.useState(!1),v=xo(),g=je(To).includes(e),b=je(Gl);function w(){p(!0)}function I(){p(!1)}function S(){u(),v(Yl(e))}return y.useEffect(()=>{f?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[f]),_.jsxs(_.Fragment,{children:[_.jsxs("li",{className:D.card,children:[_.jsxs("div",{className:D.cardImgWrap,children:[_.jsx(bc,{className:D.svgOnline}),_.jsx("img",{className:D.cardImg,src:e,alt:s})]}),_.jsxs("div",{children:[_.jsxs("div",{className:D.cardInfo,children:[_.jsx("p",{className:D.psychologist,children:"Psychologist"}),_.jsxs("ul",{className:D.cardInfoList,children:[_.jsxs("li",{className:D.cardInfoItem,children:[_.jsx(Mo,{}),_.jsxs("p",{className:D.cardInfoText,children:["Rating: ",_.jsx("span",{children:l})]})]}),_.jsx("li",{className:D.cardInfoItem,children:_.jsxs("p",{className:D.cardInfoText,children:["Price / 1 hour:"," ",_.jsxs("span",{className:D.price,children:[o,"$"]})]})}),_.jsx("li",{className:D.cardInfoItem,children:_.jsx("button",{className:D.heart,onClick:b?S:w,"aria-label":"add(remove) to(from) favorites",children:_.jsx(yc,{className:b&&g?D.svgHeart:""})})})]})]}),_.jsxs("h3",{className:D.name,children:[s," "]}),_.jsxs("div",{className:D.qualityList,children:[_.jsxs("ul",{className:D.qualityRow,children:[_.jsx("li",{className:D.quality,children:_.jsxs("p",{className:D.qualityName,children:["Experience:",_.jsx("span",{className:D.qualityText,children:n})]})}),_.jsx("li",{className:D.quality,children:_.jsxs("p",{className:D.qualityName,children:["License:",_.jsx("span",{className:D.qualityText,children:r})]})})]}),_.jsxs("ul",{className:D.qualityRow,children:[_.jsx("li",{className:D.quality,children:_.jsxs("p",{className:D.qualityName,children:["Specialization:",_.jsx("span",{className:D.qualityText,children:c})]})}),_.jsx("li",{className:D.quality,children:_.jsxs("p",{className:D.qualityName,children:["Initial_consultation:",_.jsx("span",{className:D.qualityText,children:i})]})})]})]}),_.jsx("p",{className:D.about,children:t}),d?_.jsx(Nu,{reviews:a,avatar_url:e,name:s}):_.jsx("button",{className:D.readMoreButton,onClick:h,"aria-label":"Read more",children:"Read more"})]})]}),f&&_.jsx(Lu,{close:I})]})},Du="_psychologistsList_179we_1",Fu="_messageWrap_179we_29",Vu="_message_179we_29",dn={psychologistsList:Du,messageWrap:Fu,message:Vu},Jv=({location:t,setCountFavorites:e})=>{const n=je(Oo),i=je(Po),r=je(To);return _.jsx(_.Fragment,{children:t==="/favorites"?r.length?_.jsx("ul",{className:dn.psychologistsList,children:i.map((s,o)=>_.jsx(ds,{data:s,...s,setCountFavorites:e},o))}):_.jsx("div",{className:dn.messageWrap,children:_.jsx("h1",{className:dn.message,children:"You don`t have any favorite psychologists"})}):_.jsx("ul",{className:dn.psychologistsList,children:n.map((s,o)=>_.jsx(ds,{data:s,...s,setCountFavorites:e},o))})})},ju="_loadMoreWrap_p798a_1",$u="_loadMore_p798a_1",hn={loadMoreWrap:ju,loadMore:$u},e_=({location:t})=>{const e=xo(),n=je(Oo),i=je(Kl),r=je(Ql),s=je(Po);return _.jsx(_.Fragment,{children:t==="/psychologists"?_.jsx("div",{className:hn.loadMoreWrap,children:(n.length%3===0||n.length!==i.length)&&_.jsx("button",{className:hn.loadMore,onClick:()=>e(Xl()),"aria-label":"Load more",children:"Load more"})}):t==="/favorites"&&_.jsx("div",{className:hn.loadMoreWrap,children:s.length<r.length&&_.jsx("button",{className:hn.loadMore,onClick:()=>e(Zl()),"aria-label":"Load more",children:"LoadMore"})})})};function nt(t){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(t)}function Wu(t,e){if(nt(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(nt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fo(t){var e=Wu(t,"string");return nt(e)=="symbol"?e:e+""}function Dt(t,e,n){return e=Fo(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hs(Object(n),!0).forEach(function(i){Dt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Hu(t){if(Array.isArray(t))return t}function Uu(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,s,o,l=[],a=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);a=!0);}catch(u){c=!0,r=u}finally{try{if(!a&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return l}}function Wi(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Vo(t,e){if(t){if(typeof t=="string")return Wi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wi(t,e)}}function Bu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function We(t,e){return Hu(t)||Uu(t,e)||Vo(t,e)||Bu()}function qu(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Ge(t,e){if(t==null)return{};var n=qu(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var zu=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Gu(t){var e=t.defaultInputValue,n=e===void 0?"":e,i=t.defaultMenuIsOpen,r=i===void 0?!1:i,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,a=t.menuIsOpen,c=t.onChange,u=t.onInputChange,d=t.onMenuClose,h=t.onMenuOpen,f=t.value,p=Ge(t,zu),v=y.useState(l!==void 0?l:n),m=We(v,2),g=m[0],b=m[1],w=y.useState(a!==void 0?a:r),I=We(w,2),S=I[0],T=I[1],E=y.useState(f!==void 0?f:o),x=We(E,2),L=x[0],B=x[1],ee=y.useCallback(function(ae,ge){typeof c=="function"&&c(ae,ge),B(ae)},[c]),Z=y.useCallback(function(ae,ge){var Ce;typeof u=="function"&&(Ce=u(ae,ge)),b(Ce!==void 0?Ce:ae)},[u]),ce=y.useCallback(function(){typeof h=="function"&&h(),T(!0)},[h]),be=y.useCallback(function(){typeof d=="function"&&d(),T(!1)},[d]),Y=l!==void 0?l:g,q=a!==void 0?a:S,ne=f!==void 0?f:L;return P(P({},p),{},{inputValue:Y,menuIsOpen:q,onChange:ee,onInputChange:Z,onMenuClose:be,onMenuOpen:ce,value:ne})}function R(){return R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},R.apply(this,arguments)}function Yu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Fo(i.key),i)}}function Ku(t,e,n){return e&&fs(t.prototype,e),n&&fs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hi(t,e){return Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Hi(t,e)}function Qu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hi(t,e)}function xn(t){return xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xn(t)}function jo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jo=function(){return!!t})()}function Xu(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zu(t,e){if(e&&(nt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xu(t)}function Ju(t){var e=jo();return function(){var i=xn(t),r;if(e){var s=xn(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Zu(this,r)}}function ed(t){if(Array.isArray(t))return Wi(t)}function td(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cr(t){return ed(t)||td(t)||Vo(t)||nd()}function id(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function rd(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var sd=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rd(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=id(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},t}(),ve="-ms-",Tn="-moz-",F="-webkit-",$o="comm",ur="rule",dr="decl",od="@import",Wo="@keyframes",ad="@layer",ld=Math.abs,Yn=String.fromCharCode,cd=Object.assign;function ud(t,e){return me(t,0)^45?(((e<<2^me(t,0))<<2^me(t,1))<<2^me(t,2))<<2^me(t,3):0}function Ho(t){return t.trim()}function dd(t,e){return(t=e.exec(t))?t[0]:t}function V(t,e,n){return t.replace(e,n)}function Ui(t,e){return t.indexOf(e)}function me(t,e){return t.charCodeAt(e)|0}function Bt(t,e,n){return t.slice(e,n)}function Le(t){return t.length}function hr(t){return t.length}function fn(t,e){return e.push(t),t}function hd(t,e){return t.map(e).join("")}var Kn=1,wt=1,Uo=0,Ee=0,oe=0,It="";function Qn(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:Kn,column:wt,length:o,return:""}}function Rt(t,e){return cd(Qn("",null,null,"",null,null,0),t,{length:-t.length},e)}function fd(){return oe}function pd(){return oe=Ee>0?me(It,--Ee):0,wt--,oe===10&&(wt=1,Kn--),oe}function Te(){return oe=Ee<Uo?me(It,Ee++):0,wt++,oe===10&&(wt=1,Kn++),oe}function Fe(){return me(It,Ee)}function bn(){return Ee}function tn(t,e){return Bt(It,t,e)}function qt(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bo(t){return Kn=wt=1,Uo=Le(It=t),Ee=0,[]}function qo(t){return It="",t}function Cn(t){return Ho(tn(Ee-1,Bi(t===91?t+2:t===40?t+1:t)))}function md(t){for(;(oe=Fe())&&oe<33;)Te();return qt(t)>2||qt(oe)>3?"":" "}function gd(t,e){for(;--e&&Te()&&!(oe<48||oe>102||oe>57&&oe<65||oe>70&&oe<97););return tn(t,bn()+(e<6&&Fe()==32&&Te()==32))}function Bi(t){for(;Te();)switch(oe){case t:return Ee;case 34:case 39:t!==34&&t!==39&&Bi(oe);break;case 40:t===41&&Bi(t);break;case 92:Te();break}return Ee}function vd(t,e){for(;Te()&&t+oe!==57;)if(t+oe===84&&Fe()===47)break;return"/*"+tn(e,Ee-1)+"*"+Yn(t===47?t:Te())}function _d(t){for(;!qt(Fe());)Te();return tn(t,Ee)}function yd(t){return qo(wn("",null,null,null,[""],t=Bo(t),0,[0],t))}function wn(t,e,n,i,r,s,o,l,a){for(var c=0,u=0,d=o,h=0,f=0,p=0,v=1,m=1,g=1,b=0,w="",I=r,S=s,T=i,E=w;m;)switch(p=b,b=Te()){case 40:if(p!=108&&me(E,d-1)==58){Ui(E+=V(Cn(b),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:E+=Cn(b);break;case 9:case 10:case 13:case 32:E+=md(p);break;case 92:E+=gd(bn()-1,7);continue;case 47:switch(Fe()){case 42:case 47:fn(bd(vd(Te(),bn()),e,n),a);break;default:E+="/"}break;case 123*v:l[c++]=Le(E)*g;case 125*v:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+u:g==-1&&(E=V(E,/\f/g,"")),f>0&&Le(E)-d&&fn(f>32?ms(E+";",i,n,d-1):ms(V(E," ","")+";",i,n,d-2),a);break;case 59:E+=";";default:if(fn(T=ps(E,e,n,c,u,r,l,w,I=[],S=[],d),s),b===123)if(u===0)wn(E,e,T,T,I,s,d,l,S);else switch(h===99&&me(E,3)===110?100:h){case 100:case 108:case 109:case 115:wn(t,T,T,i&&fn(ps(t,T,T,0,0,r,l,w,r,I=[],d),S),r,S,d,l,i?I:S);break;default:wn(E,T,T,T,[""],S,0,l,S)}}c=u=f=0,v=g=1,w=E="",d=o;break;case 58:d=1+Le(E),f=p;default:if(v<1){if(b==123)--v;else if(b==125&&v++==0&&pd()==125)continue}switch(E+=Yn(b),b*v){case 38:g=u>0?1:(E+="\f",-1);break;case 44:l[c++]=(Le(E)-1)*g,g=1;break;case 64:Fe()===45&&(E+=Cn(Te())),h=Fe(),u=d=Le(w=E+=_d(bn())),b++;break;case 45:p===45&&Le(E)==2&&(v=0)}}return s}function ps(t,e,n,i,r,s,o,l,a,c,u){for(var d=r-1,h=r===0?s:[""],f=hr(h),p=0,v=0,m=0;p<i;++p)for(var g=0,b=Bt(t,d+1,d=ld(v=o[p])),w=t;g<f;++g)(w=Ho(v>0?h[g]+" "+b:V(b,/&\f/g,h[g])))&&(a[m++]=w);return Qn(t,e,n,r===0?ur:l,a,c,u)}function bd(t,e,n){return Qn(t,e,n,$o,Yn(fd()),Bt(t,2,-2),0)}function ms(t,e,n,i){return Qn(t,e,n,dr,Bt(t,0,i),Bt(t,i+1,-1),i)}function _t(t,e){for(var n="",i=hr(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function Cd(t,e,n,i){switch(t.type){case ad:if(t.children.length)break;case od:case dr:return t.return=t.return||t.value;case $o:return"";case Wo:return t.return=t.value+"{"+_t(t.children,i)+"}";case ur:t.value=t.props.join(",")}return Le(n=_t(t.children,i))?t.return=t.value+"{"+n+"}":""}function wd(t){var e=hr(t);return function(n,i,r,s){for(var o="",l=0;l<e;l++)o+=t[l](n,i,r,s)||"";return o}}function Sd(t){return function(e){e.root||(e=e.return)&&t(e)}}var Ed=function(e,n,i){for(var r=0,s=0;r=s,s=Fe(),r===38&&s===12&&(n[i]=1),!qt(s);)Te();return tn(e,Ee)},Id=function(e,n){var i=-1,r=44;do switch(qt(r)){case 0:r===38&&Fe()===12&&(n[i]=1),e[i]+=Ed(Ee-1,n,i);break;case 2:e[i]+=Cn(r);break;case 4:if(r===44){e[++i]=Fe()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=Yn(r)}while(r=Te());return e},xd=function(e,n){return qo(Id(Bo(e),n))},gs=new WeakMap,Td=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!gs.get(i))&&!r){gs.set(e,!0);for(var s=[],o=xd(n,s),l=i.props,a=0,c=0;a<o.length;a++)for(var u=0;u<l.length;u++,c++)e.props[c]=s[a]?o[a].replace(/&\f/g,l[u]):l[u]+" "+o[a]}}},Od=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function zo(t,e){switch(ud(t,e)){case 5103:return F+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return F+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return F+t+Tn+t+ve+t+t;case 6828:case 4268:return F+t+ve+t+t;case 6165:return F+t+ve+"flex-"+t+t;case 5187:return F+t+V(t,/(\w+).+(:[^]+)/,F+"box-$1$2"+ve+"flex-$1$2")+t;case 5443:return F+t+ve+"flex-item-"+V(t,/flex-|-self/,"")+t;case 4675:return F+t+ve+"flex-line-pack"+V(t,/align-content|flex-|-self/,"")+t;case 5548:return F+t+ve+V(t,"shrink","negative")+t;case 5292:return F+t+ve+V(t,"basis","preferred-size")+t;case 6060:return F+"box-"+V(t,"-grow","")+F+t+ve+V(t,"grow","positive")+t;case 4554:return F+V(t,/([^-])(transform)/g,"$1"+F+"$2")+t;case 6187:return V(V(V(t,/(zoom-|grab)/,F+"$1"),/(image-set)/,F+"$1"),t,"")+t;case 5495:case 3959:return V(t,/(image-set\([^]*)/,F+"$1$`$1");case 4968:return V(V(t,/(.+:)(flex-)?(.*)/,F+"box-pack:$3"+ve+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+F+t+t;case 4095:case 3583:case 4068:case 2532:return V(t,/(.+)-inline(.+)/,F+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Le(t)-1-e>6)switch(me(t,e+1)){case 109:if(me(t,e+4)!==45)break;case 102:return V(t,/(.+:)(.+)-([^]+)/,"$1"+F+"$2-$3$1"+Tn+(me(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Ui(t,"stretch")?zo(V(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(me(t,e+1)!==115)break;case 6444:switch(me(t,Le(t)-3-(~Ui(t,"!important")&&10))){case 107:return V(t,":",":"+F)+t;case 101:return V(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+F+(me(t,14)===45?"inline-":"")+"box$3$1"+F+"$2$3$1"+ve+"$2box$3")+t}break;case 5936:switch(me(t,e+11)){case 114:return F+t+ve+V(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return F+t+ve+V(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return F+t+ve+V(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return F+t+ve+t+t}return t}var Pd=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case dr:e.return=zo(e.value,e.length);break;case Wo:return _t([Rt(e,{value:V(e.value,"@","@"+F)})],r);case ur:if(e.length)return hd(e.props,function(s){switch(dd(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _t([Rt(e,{props:[V(s,/:(read-\w+)/,":"+Tn+"$1")]})],r);case"::placeholder":return _t([Rt(e,{props:[V(s,/:(plac\w+)/,":"+F+"input-$1")]}),Rt(e,{props:[V(s,/:(plac\w+)/,":"+Tn+"$1")]}),Rt(e,{props:[V(s,/:(plac\w+)/,ve+"input-$1")]})],r)}return""})}},Rd=[Pd],Nd=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(v){var m=v.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var r=e.stylisPlugins||Rd,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var m=v.getAttribute("data-emotion").split(" "),g=1;g<m.length;g++)s[m[g]]=!0;l.push(v)});var a,c=[Td,Od];{var u,d=[Cd,Sd(function(v){u.insert(v)})],h=wd(c.concat(r,d)),f=function(m){return _t(yd(m),h)};a=function(m,g,b,w){u=b,f(m?m+"{"+g.styles+"}":g.styles),w&&(p.inserted[g.name]=!0)}}var p={key:n,sheet:new sd({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return p.sheet.hydrate(l),p},Go={exports:{}},H={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=typeof Symbol=="function"&&Symbol.for,fr=fe?Symbol.for("react.element"):60103,pr=fe?Symbol.for("react.portal"):60106,Xn=fe?Symbol.for("react.fragment"):60107,Zn=fe?Symbol.for("react.strict_mode"):60108,Jn=fe?Symbol.for("react.profiler"):60114,ei=fe?Symbol.for("react.provider"):60109,ti=fe?Symbol.for("react.context"):60110,mr=fe?Symbol.for("react.async_mode"):60111,ni=fe?Symbol.for("react.concurrent_mode"):60111,ii=fe?Symbol.for("react.forward_ref"):60112,ri=fe?Symbol.for("react.suspense"):60113,kd=fe?Symbol.for("react.suspense_list"):60120,si=fe?Symbol.for("react.memo"):60115,oi=fe?Symbol.for("react.lazy"):60116,Md=fe?Symbol.for("react.block"):60121,Ad=fe?Symbol.for("react.fundamental"):60117,Ld=fe?Symbol.for("react.responder"):60118,Dd=fe?Symbol.for("react.scope"):60119;function Pe(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case fr:switch(t=t.type,t){case mr:case ni:case Xn:case Jn:case Zn:case ri:return t;default:switch(t=t&&t.$$typeof,t){case ti:case ii:case oi:case si:case ei:return t;default:return e}}case pr:return e}}}function Yo(t){return Pe(t)===ni}H.AsyncMode=mr;H.ConcurrentMode=ni;H.ContextConsumer=ti;H.ContextProvider=ei;H.Element=fr;H.ForwardRef=ii;H.Fragment=Xn;H.Lazy=oi;H.Memo=si;H.Portal=pr;H.Profiler=Jn;H.StrictMode=Zn;H.Suspense=ri;H.isAsyncMode=function(t){return Yo(t)||Pe(t)===mr};H.isConcurrentMode=Yo;H.isContextConsumer=function(t){return Pe(t)===ti};H.isContextProvider=function(t){return Pe(t)===ei};H.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===fr};H.isForwardRef=function(t){return Pe(t)===ii};H.isFragment=function(t){return Pe(t)===Xn};H.isLazy=function(t){return Pe(t)===oi};H.isMemo=function(t){return Pe(t)===si};H.isPortal=function(t){return Pe(t)===pr};H.isProfiler=function(t){return Pe(t)===Jn};H.isStrictMode=function(t){return Pe(t)===Zn};H.isSuspense=function(t){return Pe(t)===ri};H.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Xn||t===ni||t===Jn||t===Zn||t===ri||t===kd||typeof t=="object"&&t!==null&&(t.$$typeof===oi||t.$$typeof===si||t.$$typeof===ei||t.$$typeof===ti||t.$$typeof===ii||t.$$typeof===Ad||t.$$typeof===Ld||t.$$typeof===Dd||t.$$typeof===Md)};H.typeOf=Pe;Go.exports=H;var Fd=Go.exports,Ko=Fd,Vd={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jd={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qo={};Qo[Ko.ForwardRef]=Vd;Qo[Ko.Memo]=jd;var $d=!0;function Wd(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):i+=r+" "}),i}var Xo=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||$d===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},Hd=function(e,n,i){Xo(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Ud(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Bd=/[A-Z]|^ms/g,qd=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Zo=function(e){return e.charCodeAt(1)===45},vs=function(e){return e!=null&&typeof e!="boolean"},Ci=_c(function(t){return Zo(t)?t:t.replace(Bd,"-$&").toLowerCase()}),_s=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(qd,function(i,r,s){return De={name:r,styles:s,next:De},r})}return Jl[e]!==1&&!Zo(e)&&typeof n=="number"&&n!==0?n+"px":n};function zt(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return De={name:n.name,styles:n.styles,next:De},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)De={name:i.name,styles:i.styles,next:De},i=i.next;var r=n.styles+";";return r}return zd(t,e,n)}case"function":{if(t!==void 0){var s=De,o=n(t);return De=s,zt(t,e,o)}break}}return n}function zd(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=zt(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object")vs(o)&&(i+=Ci(s)+":"+_s(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var l=0;l<o.length;l++)vs(o[l])&&(i+=Ci(s)+":"+_s(s,o[l])+";");else{var a=zt(t,e,o);switch(s){case"animation":case"animationName":{i+=Ci(s)+":"+a+";";break}default:i+=s+"{"+a+"}"}}}return i}var ys=/label:\s*([^\s;\n{]+)\s*(;|$)/g,De,Jo=function(e,n,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";De=void 0;var o=e[0];o==null||o.raw===void 0?(r=!1,s+=zt(i,n,o)):s+=o[0];for(var l=1;l<e.length;l++)s+=zt(i,n,e[l]),r&&(s+=o[l]);ys.lastIndex=0;for(var a="",c;(c=ys.exec(s))!==null;)a+="-"+c[1];var u=Ud(s)+a;return{name:u,styles:s,next:De}},Gd=function(e){return e()},Yd=rs.useInsertionEffect?rs.useInsertionEffect:!1,Kd=Yd||Gd,gr={}.hasOwnProperty,ea=y.createContext(typeof HTMLElement<"u"?Nd({key:"css"}):null);ea.Provider;var Qd=function(e){return y.forwardRef(function(n,i){var r=y.useContext(ea);return e(n,r,i)})},Xd=y.createContext({}),qi="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Zd=function(e,n){var i={};for(var r in n)gr.call(n,r)&&(i[r]=n[r]);return i[qi]=e,i},Jd=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return Xo(n,i,r),Kd(function(){return Hd(n,i,r)}),null},eh=Qd(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=t[qi],s=[i],o="";typeof t.className=="string"?o=Wd(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=Jo(s,void 0,y.useContext(Xd));o+=e.key+"-"+l.name;var a={};for(var c in t)gr.call(t,c)&&c!=="css"&&c!==qi&&(a[c]=t[c]);return a.ref=n,a.className=o,y.createElement(y.Fragment,null,y.createElement(Jd,{cache:e,serialized:l,isStringTag:typeof r=="string"}),y.createElement(r,a))}),th=eh,O=function(e,n){var i=arguments;if(n==null||!gr.call(n,"css"))return y.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=th,s[1]=Zd(e,n);for(var o=2;o<r;o++)s[o]=i[o];return y.createElement.apply(null,s)};function vr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Jo(e)}var nh=function(){var e=vr.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function ih(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const rh=Math.min,sh=Math.max,On=Math.round,pn=Math.floor,Pn=t=>({x:t,y:t});function oh(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function ta(t){return ia(t)?(t.nodeName||"").toLowerCase():"#document"}function Be(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function na(t){var e;return(e=(ia(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ia(t){return t instanceof Node||t instanceof Be(t).Node}function ah(t){return t instanceof Element||t instanceof Be(t).Element}function _r(t){return t instanceof HTMLElement||t instanceof Be(t).HTMLElement}function bs(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Be(t).ShadowRoot}function ra(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=yr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function lh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ch(t){return["html","body","#document"].includes(ta(t))}function yr(t){return Be(t).getComputedStyle(t)}function uh(t){if(ta(t)==="html")return t;const e=t.assignedSlot||t.parentNode||bs(t)&&t.host||na(t);return bs(e)?e.host:e}function sa(t){const e=uh(t);return ch(e)?t.ownerDocument?t.ownerDocument.body:t.body:_r(e)&&ra(e)?e:sa(e)}function Rn(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=sa(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=Be(r);return s?e.concat(o,o.visualViewport||[],ra(r)?r:[],o.frameElement&&n?Rn(o.frameElement):[]):e.concat(r,Rn(r,[],n))}function dh(t){const e=yr(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=_r(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,l=On(n)!==s||On(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function br(t){return ah(t)?t:t.contextElement}function Cs(t){const e=br(t);if(!_r(e))return Pn(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=dh(e);let o=(s?On(n.width):n.width)/i,l=(s?On(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const hh=Pn(0);function fh(t){const e=Be(t);return!lh()||!e.visualViewport?hh:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ph(t,e,n){return!1}function ws(t,e,n,i){e===void 0&&(e=!1);const r=t.getBoundingClientRect(),s=br(t);let o=Pn(1);e&&(o=Cs(t));const l=ph()?fh(s):Pn(0);let a=(r.left+l.x)/o.x,c=(r.top+l.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const h=Be(s),f=i;let p=h,v=p.frameElement;for(;v&&i&&f!==p;){const m=Cs(v),g=v.getBoundingClientRect(),b=yr(v),w=g.left+(v.clientLeft+parseFloat(b.paddingLeft))*m.x,I=g.top+(v.clientTop+parseFloat(b.paddingTop))*m.y;a*=m.x,c*=m.y,u*=m.x,d*=m.y,a+=w,c+=I,p=Be(v),v=p.frameElement}}return oh({width:u,height:d,x:a,y:c})}function mh(t,e){let n=null,i;const r=na(t);function s(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function o(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(l||e(),!d||!h)return;const f=pn(u),p=pn(r.clientWidth-(c+d)),v=pn(r.clientHeight-(u+h)),m=pn(c),b={rootMargin:-f+"px "+-p+"px "+-v+"px "+-m+"px",threshold:sh(0,rh(1,a))||1};let w=!0;function I(S){const T=S[0].intersectionRatio;if(T!==a){if(!w)return o();T?o(!1,T):i=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(I,{...b,root:r.ownerDocument})}catch{n=new IntersectionObserver(I,b)}n.observe(t)}return o(!0),s}function gh(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,c=br(t),u=r||s?[...c?Rn(c):[],...Rn(e)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const d=c&&l?mh(c,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(g=>{let[b]=g;b&&b.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),n()}),c&&!a&&f.observe(c),f.observe(e));let p,v=a?ws(t):null;a&&m();function m(){const g=ws(t);v&&(g.x!==v.x||g.y!==v.y||g.width!==v.width||g.height!==v.height)&&n(),v=g,p=requestAnimationFrame(m)}return n(),()=>{var g;u.forEach(b=>{r&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(g=f)==null||g.disconnect(),f=null,a&&cancelAnimationFrame(p)}}var zi=y.useLayoutEffect,vh=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Nn=function(){};function _h(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function yh(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var s=[].concat(i);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(_h(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var Ss=function(e){return Oh(e)?e.filter(Boolean):nt(e)==="object"&&e!==null?[e]:[]},oa=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Ge(e,vh);return P({},n)},te=function(e,n,i){var r=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:r(i??{},o(n,e),l)}};function ai(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function bh(t){return ai(t)?window.innerHeight:t.clientHeight}function aa(t){return ai(t)?window.pageYOffset:t.scrollTop}function kn(t,e){if(ai(t)){window.scrollTo(0,e);return}t.scrollTop=e}function Ch(t){var e=getComputedStyle(t),n=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var r=t;r=r.parentElement;)if(e=getComputedStyle(r),!(n&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return r;return document.documentElement}function wh(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function mn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Nn,r=aa(t),s=e-r,o=10,l=0;function a(){l+=o;var c=wh(l,r,s,n);kn(t,c),l<n?window.requestAnimationFrame(a):i(t)}a()}function Es(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=e.offsetHeight/3;i.bottom+r>n.bottom?kn(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+r,t.scrollHeight)):i.top-r<n.top&&kn(t,Math.max(e.offsetTop-r,0))}function Sh(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function Is(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Eh(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var la=!1,Ih={get passive(){return la=!0}},gn=typeof window<"u"?window:{};gn.addEventListener&&gn.removeEventListener&&(gn.addEventListener("p",Nn,Ih),gn.removeEventListener("p",Nn,!1));var xh=la;function Th(t){return t!=null}function Oh(t){return Array.isArray(t)}function vn(t,e,n){return t?e:n}var Ph=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var s=Object.entries(e).filter(function(o){var l=We(o,1),a=l[0];return!i.includes(a)});return s.reduce(function(o,l){var a=We(l,2),c=a[0],u=a[1];return o[c]=u,o},{})},Rh=["children","innerProps"],Nh=["children","innerProps"];function kh(t){var e=t.maxHeight,n=t.menuEl,i=t.minHeight,r=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,a=Ch(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var u=a.getBoundingClientRect(),d=u.height,h=n.getBoundingClientRect(),f=h.bottom,p=h.height,v=h.top,m=n.offsetParent.getBoundingClientRect(),g=m.top,b=o?window.innerHeight:bh(a),w=aa(a),I=parseInt(getComputedStyle(n).marginBottom,10),S=parseInt(getComputedStyle(n).marginTop,10),T=g-S,E=b-v,x=T+w,L=d-w-v,B=f-b+w+I,ee=w+v-S,Z=160;switch(r){case"auto":case"bottom":if(E>=p)return{placement:"bottom",maxHeight:e};if(L>=p&&!o)return s&&mn(a,B,Z),{placement:"bottom",maxHeight:e};if(!o&&L>=i||o&&E>=i){s&&mn(a,B,Z);var ce=o?E-I:L-I;return{placement:"bottom",maxHeight:ce}}if(r==="auto"||o){var be=e,Y=o?T:x;return Y>=i&&(be=Math.min(Y-I-l,e)),{placement:"top",maxHeight:be}}if(r==="bottom")return s&&kn(a,B),{placement:"bottom",maxHeight:e};break;case"top":if(T>=p)return{placement:"top",maxHeight:e};if(x>=p&&!o)return s&&mn(a,ee,Z),{placement:"top",maxHeight:e};if(!o&&x>=i||o&&T>=i){var q=e;return(!o&&x>=i||o&&T>=i)&&(q=o?T-S:x-S),s&&mn(a,ee,Z),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(r,'".'))}return c}function Mh(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var ca=function(e){return e==="auto"?"bottom":e},Ah=function(e,n){var i,r=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,a=s.colors;return P((i={label:"menu"},Dt(i,Mh(r),"100%"),Dt(i,"position","absolute"),Dt(i,"width","100%"),Dt(i,"zIndex",1),i),n?{}:{backgroundColor:a.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},ua=y.createContext(null),Lh=function(e){var n=e.children,i=e.minMenuHeight,r=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,a=e.theme,c=y.useContext(ua)||{},u=c.setPortalPlacement,d=y.useRef(null),h=y.useState(r),f=We(h,2),p=f[0],v=f[1],m=y.useState(null),g=We(m,2),b=g[0],w=g[1],I=a.spacing.controlHeight;return zi(function(){var S=d.current;if(S){var T=o==="fixed",E=l&&!T,x=kh({maxHeight:r,menuEl:S,minHeight:i,placement:s,shouldScroll:E,isFixedPosition:T,controlHeight:I});v(x.maxHeight),w(x.placement),u==null||u(x.placement)}},[r,s,o,l,i,u,I]),n({ref:d,placerProps:P(P({},e),{},{placement:b||ca(s),maxHeight:p})})},Dh=function(e){var n=e.children,i=e.innerRef,r=e.innerProps;return O("div",R({},te(e,"menu",{menu:!0}),{ref:i},r),n)},Fh=Dh,Vh=function(e,n){var i=e.maxHeight,r=e.theme.spacing.baseUnit;return P({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:r,paddingTop:r})},jh=function(e){var n=e.children,i=e.innerProps,r=e.innerRef,s=e.isMulti;return O("div",R({},te(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},i),n)},da=function(e,n){var i=e.theme,r=i.spacing.baseUnit,s=i.colors;return P({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},$h=da,Wh=da,Hh=function(e){var n=e.children,i=n===void 0?"No options":n,r=e.innerProps,s=Ge(e,Rh);return O("div",R({},te(P(P({},s),{},{children:i,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),i)},Uh=function(e){var n=e.children,i=n===void 0?"Loading...":n,r=e.innerProps,s=Ge(e,Nh);return O("div",R({},te(P(P({},s),{},{children:i,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),i)},Bh=function(e){var n=e.rect,i=e.offset,r=e.position;return{left:n.left,position:r,top:i,width:n.width,zIndex:1}},qh=function(e){var n=e.appendTo,i=e.children,r=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,a=y.useRef(null),c=y.useRef(null),u=y.useState(ca(o)),d=We(u,2),h=d[0],f=d[1],p=y.useMemo(function(){return{setPortalPlacement:f}},[]),v=y.useState(null),m=We(v,2),g=m[0],b=m[1],w=y.useCallback(function(){if(r){var E=Sh(r),x=l==="fixed"?0:window.pageYOffset,L=E[h]+x;(L!==(g==null?void 0:g.offset)||E.left!==(g==null?void 0:g.rect.left)||E.width!==(g==null?void 0:g.rect.width))&&b({offset:L,rect:E})}},[r,l,h,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);zi(function(){w()},[w]);var I=y.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),r&&a.current&&(c.current=gh(r,a.current,w,{elementResize:"ResizeObserver"in window}))},[r,w]);zi(function(){I()},[I]);var S=y.useCallback(function(E){a.current=E,I()},[I]);if(!n&&l!=="fixed"||!g)return null;var T=O("div",R({ref:S},te(P(P({},e),{},{offset:g.offset,position:l,rect:g.rect}),"menuPortal",{"menu-portal":!0}),s),i);return O(ua.Provider,{value:p},n?Di.createPortal(T,n):T)},zh=function(e){var n=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Gh=function(e){var n=e.children,i=e.innerProps,r=e.isDisabled,s=e.isRtl;return O("div",R({},te(e,"container",{"--is-disabled":r,"--is-rtl":s}),i),n)},Yh=function(e,n){var i=e.theme.spacing,r=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return P({alignItems:"center",display:r&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},Kh=function(e){var n=e.children,i=e.innerProps,r=e.isMulti,s=e.hasValue;return O("div",R({},te(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),i),n)},Qh=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Xh=function(e){var n=e.children,i=e.innerProps;return O("div",R({},te(e,"indicatorsContainer",{indicators:!0}),i),n)},xs,Zh=["size"],Jh=["innerProps","isRtl","size"],ef={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ha=function(e){var n=e.size,i=Ge(e,Zh);return O("svg",R({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:ef},i))},Cr=function(e){return O(ha,R({size:20},e),O("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fa=function(e){return O(ha,R({size:20},e),O("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},pa=function(e,n){var i=e.isFocused,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return P({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?o.neutral60:o.neutral20,padding:s*2,":hover":{color:i?o.neutral80:o.neutral40}})},tf=pa,nf=function(e){var n=e.children,i=e.innerProps;return O("div",R({},te(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||O(fa,null))},rf=pa,sf=function(e){var n=e.children,i=e.innerProps;return O("div",R({},te(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||O(Cr,null))},of=function(e,n){var i=e.isDisabled,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return P({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},af=function(e){var n=e.innerProps;return O("span",R({},n,te(e,"indicatorSeparator",{"indicator-separator":!0})))},lf=nh(xs||(xs=ih([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),cf=function(e,n){var i=e.isFocused,r=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return P({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?o.neutral60:o.neutral20,padding:l*2})},wi=function(e){var n=e.delay,i=e.offset;return O("span",{css:vr({animation:"".concat(lf," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},uf=function(e){var n=e.innerProps,i=e.isRtl,r=e.size,s=r===void 0?4:r,o=Ge(e,Jh);return O("div",R({},te(P(P({},o),{},{innerProps:n,isRtl:i,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),O(wi,{delay:0,offset:i}),O(wi,{delay:160,offset:!0}),O(wi,{delay:320,offset:!i}))},df=function(e,n){var i=e.isDisabled,r=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,a=s.spacing;return P({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:r?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},hf=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return O("div",R({ref:s},te(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":r,"control--menu-is-open":l}),o,{"aria-disabled":i||void 0}),n)},ff=hf,pf=["data"],mf=function(e,n){var i=e.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},gf=function(e){var n=e.children,i=e.cx,r=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,a=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return O("div",R({},te(e,"group",{group:!0}),a),O(o,R({},l,{selectProps:d,theme:u,getStyles:r,getClassNames:s,cx:i}),c),O("div",null,n))},vf=function(e,n){var i=e.theme,r=i.colors,s=i.spacing;return P({label:"group",cursor:"default",display:"block"},n?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},_f=function(e){var n=oa(e);n.data;var i=Ge(n,pf);return O("div",R({},te(e,"groupHeading",{"group-heading":!0}),i))},yf=gf,bf=["innerRef","isDisabled","isHidden","inputClassName"],Cf=function(e,n){var i=e.isDisabled,r=e.value,s=e.theme,o=s.spacing,l=s.colors;return P(P({visibility:i?"hidden":"visible",transform:r?"translateZ(0)":""},wf),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},ma={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},wf={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":P({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},ma)},Sf=function(e){return P({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},ma)},Ef=function(e){var n=e.cx,i=e.value,r=oa(e),s=r.innerRef,o=r.isDisabled,l=r.isHidden,a=r.inputClassName,c=Ge(r,bf);return O("div",R({},te(e,"input",{"input-container":!0}),{"data-value":i||""}),O("input",R({className:n({input:!0},a),ref:s,style:Sf(l),disabled:o},c)))},If=Ef,xf=function(e,n){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors;return P({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},Tf=function(e,n){var i=e.theme,r=i.borderRadius,s=i.colors,o=e.cropWithEllipsis;return P({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Of=function(e,n){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors,l=e.isFocused;return P({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},ga=function(e){var n=e.children,i=e.innerProps;return O("div",i,n)},Pf=ga,Rf=ga;function Nf(t){var e=t.children,n=t.innerProps;return O("div",R({role:"button"},n),e||O(Cr,{size:14}))}var kf=function(e){var n=e.children,i=e.components,r=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,a=e.selectProps,c=i.Container,u=i.Label,d=i.Remove;return O(c,{data:r,innerProps:P(P({},te(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:a},O(u,{data:r,innerProps:P({},te(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},n),O(d,{data:r,innerProps:P(P({},te(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:a}))},Mf=kf,Af=function(e,n){var i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,a=o.colors;return P({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?a.primary:r?a.primary25:"transparent",color:i?a.neutral20:s?a.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:s?a.primary:a.primary50}})},Lf=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return O("div",R({},te(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":r,"option--is-selected":s}),{ref:o,"aria-disabled":i},l),n)},Df=Lf,Ff=function(e,n){var i=e.theme,r=i.spacing,s=i.colors;return P({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},Vf=function(e){var n=e.children,i=e.innerProps;return O("div",R({},te(e,"placeholder",{placeholder:!0}),i),n)},jf=Vf,$f=function(e,n){var i=e.isDisabled,r=e.theme,s=r.spacing,o=r.colors;return P({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Wf=function(e){var n=e.children,i=e.isDisabled,r=e.innerProps;return O("div",R({},te(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),r),n)},Hf=Wf,Uf={ClearIndicator:sf,Control:ff,DropdownIndicator:nf,DownChevron:fa,CrossIcon:Cr,Group:yf,GroupHeading:_f,IndicatorsContainer:Xh,IndicatorSeparator:af,Input:If,LoadingIndicator:uf,Menu:Fh,MenuList:jh,MenuPortal:qh,LoadingMessage:Uh,NoOptionsMessage:Hh,MultiValue:Mf,MultiValueContainer:Pf,MultiValueLabel:Rf,MultiValueRemove:Nf,Option:Df,Placeholder:jf,SelectContainer:Gh,SingleValue:Hf,ValueContainer:Kh},Bf=function(e){return P(P({},Uf),e.components)},Ts=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function qf(t,e){return!!(t===e||Ts(t)&&Ts(e))}function zf(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!qf(t[n],e[n]))return!1;return!0}function Gf(t,e){e===void 0&&(e=zf);var n=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return i.clear=function(){n=null},i}var Yf={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Kf=function(e){return O("span",R({css:Yf},e))},Os=Kf,Qf={guidance:function(e){var n=e.isSearchable,i=e.isMulti,r=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,i=e.label,r=i===void 0?"":i,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var n=e.context,i=e.focused,r=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,a=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(v,m){return v&&v.length?"".concat(v.indexOf(m)+1," of ").concat(v.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(d(l,i),".");if(n==="menu"&&u){var h=a?" disabled":"",f="".concat(c?" selected":"").concat(h);return"".concat(o).concat(f,", ").concat(d(r,i),".")}return""},onFilter:function(e){var n=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},Xf=function(e){var n=e.ariaSelection,i=e.focusedOption,r=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,a=e.selectProps,c=e.id,u=e.isAppleDevice,d=a.ariaLiveMessages,h=a.getOptionLabel,f=a.inputValue,p=a.isMulti,v=a.isOptionDisabled,m=a.isSearchable,g=a.menuIsOpen,b=a.options,w=a.screenReaderStatus,I=a.tabSelectsValue,S=a.isLoading,T=a["aria-label"],E=a["aria-live"],x=y.useMemo(function(){return P(P({},Qf),d||{})},[d]),L=y.useMemo(function(){var Y="";if(n&&x.onChange){var q=n.option,ne=n.options,ae=n.removedValue,ge=n.removedValues,Ce=n.value,Re=function(pe){return Array.isArray(pe)?null:pe},$=ae||q||Re(Ce),ie=$?h($):"",K=ne||ge||void 0,re=K?K.map(h):[],Q=P({isDisabled:$&&v($,l),label:ie,labels:re},n);Y=x.onChange(Q)}return Y},[n,x,v,l,h]),B=y.useMemo(function(){var Y="",q=i||r,ne=!!(i&&l&&l.includes(i));if(q&&x.onFocus){var ae={focused:q,label:h(q),isDisabled:v(q,l),isSelected:ne,options:s,context:q===i?"menu":"value",selectValue:l,isAppleDevice:u};Y=x.onFocus(ae)}return Y},[i,r,h,v,x,s,l,u]),ee=y.useMemo(function(){var Y="";if(g&&b.length&&!S&&x.onFilter){var q=w({count:s.length});Y=x.onFilter({inputValue:f,resultsMessage:q})}return Y},[s,f,g,x,b,w,S]),Z=(n==null?void 0:n.action)==="initial-input-focus",ce=y.useMemo(function(){var Y="";if(x.guidance){var q=r?"value":g?"menu":"input";Y=x.guidance({"aria-label":T,context:q,isDisabled:i&&v(i,l),isMulti:p,isSearchable:m,tabSelectsValue:I,isInitialFocus:Z})}return Y},[T,i,r,p,v,m,g,x,l,I,Z]),be=O(y.Fragment,null,O("span",{id:"aria-selection"},L),O("span",{id:"aria-focused"},B),O("span",{id:"aria-results"},ee),O("span",{id:"aria-guidance"},ce));return O(y.Fragment,null,O(Os,{id:c},Z&&be),O(Os,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!Z&&be))},Zf=Xf,Gi=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Jf=new RegExp("["+Gi.map(function(t){return t.letters}).join("")+"]","g"),va={};for(var Si=0;Si<Gi.length;Si++)for(var Ei=Gi[Si],Ii=0;Ii<Ei.letters.length;Ii++)va[Ei.letters[Ii]]=Ei.base;var _a=function(e){return e.replace(Jf,function(n){return va[n]})},ep=Gf(_a),Ps=function(e){return e.replace(/^\s+|\s+$/g,"")},tp=function(e){return"".concat(e.label," ").concat(e.value)},np=function(e){return function(n,i){if(n.data.__isNew__)return!0;var r=P({ignoreCase:!0,ignoreAccents:!0,stringify:tp,trim:!0,matchFrom:"any"},e),s=r.ignoreCase,o=r.ignoreAccents,l=r.stringify,a=r.trim,c=r.matchFrom,u=a?Ps(i):i,d=a?Ps(l(n)):l(n);return s&&(u=u.toLowerCase(),d=d.toLowerCase()),o&&(u=ep(u),d=_a(d)),c==="start"?d.substr(0,u.length)===u:d.indexOf(u)>-1}},ip=["innerRef"];function rp(t){var e=t.innerRef,n=Ge(t,ip),i=Ph(n,"onExited","in","enter","exit","appear");return O("input",R({ref:e},i,{css:vr({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var sp=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function op(t){var e=t.isEnabled,n=t.onBottomArrive,i=t.onBottomLeave,r=t.onTopArrive,s=t.onTopLeave,o=y.useRef(!1),l=y.useRef(!1),a=y.useRef(0),c=y.useRef(null),u=y.useCallback(function(m,g){if(c.current!==null){var b=c.current,w=b.scrollTop,I=b.scrollHeight,S=b.clientHeight,T=c.current,E=g>0,x=I-S-w,L=!1;x>g&&o.current&&(i&&i(m),o.current=!1),E&&l.current&&(s&&s(m),l.current=!1),E&&g>x?(n&&!o.current&&n(m),T.scrollTop=I,L=!0,o.current=!0):!E&&-g>w&&(r&&!l.current&&r(m),T.scrollTop=0,L=!0,l.current=!0),L&&sp(m)}},[n,i,r,s]),d=y.useCallback(function(m){u(m,m.deltaY)},[u]),h=y.useCallback(function(m){a.current=m.changedTouches[0].clientY},[]),f=y.useCallback(function(m){var g=a.current-m.changedTouches[0].clientY;u(m,g)},[u]),p=y.useCallback(function(m){if(m){var g=xh?{passive:!1}:!1;m.addEventListener("wheel",d,g),m.addEventListener("touchstart",h,g),m.addEventListener("touchmove",f,g)}},[f,h,d]),v=y.useCallback(function(m){m&&(m.removeEventListener("wheel",d,!1),m.removeEventListener("touchstart",h,!1),m.removeEventListener("touchmove",f,!1))},[f,h,d]);return y.useEffect(function(){if(e){var m=c.current;return p(m),function(){v(m)}}},[e,p,v]),function(m){c.current=m}}var Rs=["boxSizing","height","overflow","paddingRight","position"],Ns={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ks(t){t.preventDefault()}function Ms(t){t.stopPropagation()}function As(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function Ls(){return"ontouchstart"in window||navigator.maxTouchPoints}var Ds=!!(typeof window<"u"&&window.document&&window.document.createElement),Nt=0,ft={capture:!1,passive:!1};function ap(t){var e=t.isEnabled,n=t.accountForScrollbars,i=n===void 0?!0:n,r=y.useRef({}),s=y.useRef(null),o=y.useCallback(function(a){if(Ds){var c=document.body,u=c&&c.style;if(i&&Rs.forEach(function(p){var v=u&&u[p];r.current[p]=v}),i&&Nt<1){var d=parseInt(r.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,f=window.innerWidth-h+d||0;Object.keys(Ns).forEach(function(p){var v=Ns[p];u&&(u[p]=v)}),u&&(u.paddingRight="".concat(f,"px"))}c&&Ls()&&(c.addEventListener("touchmove",ks,ft),a&&(a.addEventListener("touchstart",As,ft),a.addEventListener("touchmove",Ms,ft))),Nt+=1}},[i]),l=y.useCallback(function(a){if(Ds){var c=document.body,u=c&&c.style;Nt=Math.max(Nt-1,0),i&&Nt<1&&Rs.forEach(function(d){var h=r.current[d];u&&(u[d]=h)}),c&&Ls()&&(c.removeEventListener("touchmove",ks,ft),a&&(a.removeEventListener("touchstart",As,ft),a.removeEventListener("touchmove",Ms,ft)))}},[i]);return y.useEffect(function(){if(e){var a=s.current;return o(a),function(){l(a)}}},[e,o,l]),function(a){s.current=a}}var lp=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},cp={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function up(t){var e=t.children,n=t.lockEnabled,i=t.captureEnabled,r=i===void 0?!0:i,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,a=t.onTopLeave,c=op({isEnabled:r,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:a}),u=ap({isEnabled:n}),d=function(f){c(f),u(f)};return O(y.Fragment,null,n&&O("div",{onClick:lp,css:cp}),e(d))}var dp={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},hp=function(e){var n=e.name,i=e.onFocus;return O("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:dp,value:"",onChange:function(){}})},fp=hp;function wr(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function pp(){return wr(/^iPhone/i)}function ya(){return wr(/^Mac/i)}function mp(){return wr(/^iPad/i)||ya()&&navigator.maxTouchPoints>1}function gp(){return pp()||mp()}function vp(){return ya()||gp()}var _p=function(e){return e.label},yp=function(e){return e.label},bp=function(e){return e.value},Cp=function(e){return!!e.isDisabled},wp={clearIndicator:rf,container:zh,control:df,dropdownIndicator:tf,group:mf,groupHeading:vf,indicatorsContainer:Qh,indicatorSeparator:of,input:Cf,loadingIndicator:cf,loadingMessage:Wh,menu:Ah,menuList:Vh,menuPortal:Bh,multiValue:xf,multiValueLabel:Tf,multiValueRemove:Of,noOptionsMessage:$h,option:Af,placeholder:Ff,singleValue:$f,valueContainer:Yh},Sp={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Ep=4,ba=4,Ip=38,xp=ba*2,Tp={baseUnit:ba,controlHeight:Ip,menuGutter:xp},xi={borderRadius:Ep,colors:Sp,spacing:Tp},Op={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Is(),captureMenuScroll:!Is(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:np(),formatGroupLabel:_p,getOptionLabel:yp,getOptionValue:bp,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Cp,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Eh(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Fs(t,e,n,i){var r=Sa(t,e,n),s=Ea(t,e,n),o=wa(t,e),l=Mn(t,e);return{type:"option",data:e,isDisabled:r,isSelected:s,label:o,value:l,index:i}}function Sn(t,e){return t.options.map(function(n,i){if("options"in n){var r=n.options.map(function(o,l){return Fs(t,o,e,l)}).filter(function(o){return js(t,o)});return r.length>0?{type:"group",data:n,options:r,index:i}:void 0}var s=Fs(t,n,e,i);return js(t,s)?s:void 0}).filter(Th)}function Ca(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,cr(n.options.map(function(i){return i.data}))):e.push(n.data),e},[])}function Vs(t,e){return t.reduce(function(n,i){return i.type==="group"?n.push.apply(n,cr(i.options.map(function(r){return{data:r.data,id:"".concat(e,"-").concat(i.index,"-").concat(r.index)}}))):n.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),n},[])}function Pp(t,e){return Ca(Sn(t,e))}function js(t,e){var n=t.inputValue,i=n===void 0?"":n,r=e.data,s=e.isSelected,o=e.label,l=e.value;return(!xa(t)||!s)&&Ia(t,{label:o,value:l,data:r},i)}function Rp(t,e){var n=t.focusedValue,i=t.selectValue,r=i.indexOf(n);if(r>-1){var s=e.indexOf(n);if(s>-1)return n;if(r<e.length)return e[r]}return null}function Np(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var Ti=function(e,n){var i,r=(i=e.find(function(s){return s.data===n}))===null||i===void 0?void 0:i.id;return r||null},wa=function(e,n){return e.getOptionLabel(n)},Mn=function(e,n){return e.getOptionValue(n)};function Sa(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function Ea(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var i=Mn(t,e);return n.some(function(r){return Mn(t,r)===i})}function Ia(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var xa=function(e){var n=e.hideSelectedOptions,i=e.isMulti;return n===void 0?i:n},kp=1,Ta=function(t){Qu(n,t);var e=Ju(n);function n(i){var r;if(Yu(this,n),r=e.call(this,i),r.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.isAppleDevice=vp(),r.controlRef=null,r.getControlRef=function(a){r.controlRef=a},r.focusedOptionRef=null,r.getFocusedOptionRef=function(a){r.focusedOptionRef=a},r.menuListRef=null,r.getMenuListRef=function(a){r.menuListRef=a},r.inputRef=null,r.getInputRef=function(a){r.inputRef=a},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(a,c){var u=r.props,d=u.onChange,h=u.name;c.name=h,r.ariaOnChange(a,c),d(a,c)},r.setValue=function(a,c,u){var d=r.props,h=d.closeMenuOnSelect,f=d.isMulti,p=d.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:p}),h&&(r.setState({inputIsHiddenAfterUpdate:!f}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(a,{action:c,option:u})},r.selectOption=function(a){var c=r.props,u=c.blurInputOnSelect,d=c.isMulti,h=c.name,f=r.state.selectValue,p=d&&r.isOptionSelected(a,f),v=r.isOptionDisabled(a,f);if(p){var m=r.getOptionValue(a);r.setValue(f.filter(function(g){return r.getOptionValue(g)!==m}),"deselect-option",a)}else if(!v)d?r.setValue([].concat(cr(f),[a]),"select-option",a):r.setValue(a,"select-option");else{r.ariaOnChange(a,{action:"select-option",option:a,name:h});return}u&&r.blurInput()},r.removeValue=function(a){var c=r.props.isMulti,u=r.state.selectValue,d=r.getOptionValue(a),h=u.filter(function(p){return r.getOptionValue(p)!==d}),f=vn(c,h,h[0]||null);r.onChange(f,{action:"remove-value",removedValue:a}),r.focusInput()},r.clearValue=function(){var a=r.state.selectValue;r.onChange(vn(r.props.isMulti,[],null),{action:"clear",removedValues:a})},r.popValue=function(){var a=r.props.isMulti,c=r.state.selectValue,u=c[c.length-1],d=c.slice(0,c.length-1),h=vn(a,d,d[0]||null);r.onChange(h,{action:"pop-value",removedValue:u})},r.getFocusedOptionId=function(a){return Ti(r.state.focusableOptionsWithIds,a)},r.getFocusableOptionsWithIds=function(){return Vs(Sn(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return yh.apply(void 0,[r.props.classNamePrefix].concat(c))},r.getOptionLabel=function(a){return wa(r.props,a)},r.getOptionValue=function(a){return Mn(r.props,a)},r.getStyles=function(a,c){var u=r.props.unstyled,d=wp[a](c,u);d.boxSizing="border-box";var h=r.props.styles[a];return h?h(d,c):d},r.getClassNames=function(a,c){var u,d;return(u=(d=r.props.classNames)[a])===null||u===void 0?void 0:u.call(d,c)},r.getElementId=function(a){return"".concat(r.state.instancePrefix,"-").concat(a)},r.getComponents=function(){return Bf(r.props)},r.buildCategorizedOptions=function(){return Sn(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return Ca(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(a,c){r.setState({ariaSelection:P({value:a},c)})},r.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(a){r.blockOptionHover=!1},r.onControlMouseDown=function(a){if(!a.defaultPrevented){var c=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&r.onMenuClose():c&&r.openMenu("first"):(c&&(r.openAfterFocus=!0),r.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},r.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!r.props.isDisabled){var c=r.props,u=c.isMulti,d=c.menuIsOpen;r.focusInput(),d?(r.setState({inputIsHiddenAfterUpdate:!u}),r.onMenuClose()):r.openMenu("first"),a.preventDefault()}},r.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(r.clearValue(),a.preventDefault(),r.openAfterFocus=!1,a.type==="touchend"?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(a){typeof r.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&ai(a.target)&&r.props.onMenuClose():typeof r.props.closeMenuOnScroll=="function"&&r.props.closeMenuOnScroll(a)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(a){var c=a.touches,u=c&&c.item(0);u&&(r.initialTouchX=u.clientX,r.initialTouchY=u.clientY,r.userIsDragging=!1)},r.onTouchMove=function(a){var c=a.touches,u=c&&c.item(0);if(u){var d=Math.abs(u.clientX-r.initialTouchX),h=Math.abs(u.clientY-r.initialTouchY),f=5;r.userIsDragging=d>f||h>f}},r.onTouchEnd=function(a){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(a.target)&&r.menuListRef&&!r.menuListRef.contains(a.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(a){r.userIsDragging||r.onControlMouseDown(a)},r.onClearIndicatorTouchEnd=function(a){r.userIsDragging||r.onClearIndicatorMouseDown(a)},r.onDropdownIndicatorTouchEnd=function(a){r.userIsDragging||r.onDropdownIndicatorMouseDown(a)},r.handleInputChange=function(a){var c=r.props.inputValue,u=a.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(u,{action:"input-change",prevInputValue:c}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(a){r.props.onFocus&&r.props.onFocus(a),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(a){var c=r.props.inputValue;if(r.menuListRef&&r.menuListRef.contains(document.activeElement)){r.inputRef.focus();return}r.props.onBlur&&r.props.onBlur(a),r.onInputChange("",{action:"input-blur",prevInputValue:c}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1})},r.onOptionHover=function(a){if(!(r.blockOptionHover||r.state.focusedOption===a)){var c=r.getFocusableOptions(),u=c.indexOf(a);r.setState({focusedOption:a,focusedOptionId:u>-1?r.getFocusedOptionId(a):null})}},r.shouldHideSelectedOptions=function(){return xa(r.props)},r.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),r.focus()},r.onKeyDown=function(a){var c=r.props,u=c.isMulti,d=c.backspaceRemovesValue,h=c.escapeClearsValue,f=c.inputValue,p=c.isClearable,v=c.isDisabled,m=c.menuIsOpen,g=c.onKeyDown,b=c.tabSelectsValue,w=c.openMenuOnFocus,I=r.state,S=I.focusedOption,T=I.focusedValue,E=I.selectValue;if(!v&&!(typeof g=="function"&&(g(a),a.defaultPrevented))){switch(r.blockOptionHover=!0,a.key){case"ArrowLeft":if(!u||f)return;r.focusValue("previous");break;case"ArrowRight":if(!u||f)return;r.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(T)r.removeValue(T);else{if(!d)return;u?r.popValue():p&&r.clearValue()}break;case"Tab":if(r.isComposing||a.shiftKey||!m||!b||!S||w&&r.isOptionSelected(S,E))return;r.selectOption(S);break;case"Enter":if(a.keyCode===229)break;if(m){if(!S||r.isComposing)return;r.selectOption(S);break}return;case"Escape":m?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:f}),r.onMenuClose()):p&&h&&r.clearValue();break;case" ":if(f)return;if(!m){r.openMenu("first");break}if(!S)return;r.selectOption(S);break;case"ArrowUp":m?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":m?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!m)return;r.focusOption("pageup");break;case"PageDown":if(!m)return;r.focusOption("pagedown");break;case"Home":if(!m)return;r.focusOption("first");break;case"End":if(!m)return;r.focusOption("last");break;default:return}a.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++kp),r.state.selectValue=Ss(i.value),i.menuIsOpen&&r.state.selectValue.length){var s=r.getFocusableOptionsWithIds(),o=r.buildFocusableOptions(),l=o.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=s,r.state.focusedOption=o[l],r.state.focusedOptionId=Ti(s,o[l])}return r}return Ku(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Es(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,a=this.state.isFocused;(a&&!o&&r.isDisabled||a&&l&&!r.menuIsOpen)&&this.focusInput(),a&&o&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!a&&!o&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Es(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,s){this.props.onInputChange(r,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var s=this,o=this.state,l=o.selectValue,a=o.isFocused,c=this.buildFocusableOptions(),u=r==="first"?0:c.length-1;if(!this.props.isMulti){var d=c.indexOf(l[0]);d>-1&&(u=d)}this.scrollToFocusedOptionOnUpdate=!(a&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u],focusedOptionId:this.getFocusedOptionId(c[u])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(r){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var a=o.indexOf(l);l||(a=-1);var c=o.length-1,u=-1;if(o.length){switch(r){case"previous":a===0?u=0:a===-1?u=c:u=a-1;break;case"next":a>-1&&a<c&&(u=a+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var a=0,c=l.indexOf(o);o||(c=-1),r==="up"?a=c>0?c-1:l.length-1:r==="down"?a=(c+1)%l.length:r==="pageup"?(a=c-s,a<0&&(a=0)):r==="pagedown"?(a=c+s,a>l.length-1&&(a=l.length-1)):r==="last"&&(a=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[a],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[a])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(xi):P(P({},xi),this.props.theme):xi}},{key:"getCommonProps",value:function(){var r=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,a=this.getValue,c=this.selectOption,u=this.setValue,d=this.props,h=d.isMulti,f=d.isRtl,p=d.options,v=this.hasValue();return{clearValue:r,cx:s,getStyles:o,getClassNames:l,getValue:a,hasValue:v,isMulti:h,isRtl:f,options:p,selectOption:c,selectProps:d,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,s=r.isClearable,o=r.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(r,s){return Sa(this.props,r,s)}},{key:"isOptionSelected",value:function(r,s){return Ea(this.props,r,s)}},{key:"filterOption",value:function(r,s){return Ia(this.props,r,s)}},{key:"formatOptionLabel",value:function(r,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(r,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var r=this.props,s=r.isDisabled,o=r.isSearchable,l=r.inputId,a=r.inputValue,c=r.tabIndex,u=r.form,d=r.menuIsOpen,h=r.required,f=this.getComponents(),p=f.Input,v=this.state,m=v.inputIsHidden,g=v.ariaSelection,b=this.commonProps,w=l||this.getElementId("input"),I=P(P(P({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},d&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(g==null?void 0:g.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?y.createElement(p,R({},b,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:s,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:a},I)):y.createElement(rp,R({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Nn,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:u,value:""},I))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,a=s.MultiValueLabel,c=s.MultiValueRemove,u=s.SingleValue,d=s.Placeholder,h=this.commonProps,f=this.props,p=f.controlShouldRenderValue,v=f.isDisabled,m=f.isMulti,g=f.inputValue,b=f.placeholder,w=this.state,I=w.selectValue,S=w.focusedValue,T=w.isFocused;if(!this.hasValue()||!p)return g?null:y.createElement(d,R({},h,{key:"placeholder",isDisabled:v,isFocused:T,innerProps:{id:this.getElementId("placeholder")}}),b);if(m)return I.map(function(x,L){var B=x===S,ee="".concat(r.getOptionLabel(x),"-").concat(r.getOptionValue(x));return y.createElement(o,R({},h,{components:{Container:l,Label:a,Remove:c},isFocused:B,isDisabled:v,key:ee,index:L,removeProps:{onClick:function(){return r.removeValue(x)},onTouchEnd:function(){return r.removeValue(x)},onMouseDown:function(ce){ce.preventDefault()}},data:x}),r.formatOptionLabel(x,"value"))});if(g)return null;var E=I[0];return y.createElement(u,R({},h,{data:E,isDisabled:v}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),s=r.ClearIndicator,o=this.commonProps,l=this.props,a=l.isDisabled,c=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!s||a||!this.hasValue()||c)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(s,R({},o,{innerProps:d,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),s=r.LoadingIndicator,o=this.commonProps,l=this.props,a=l.isDisabled,c=l.isLoading,u=this.state.isFocused;if(!s||!c)return null;var d={"aria-hidden":"true"};return y.createElement(s,R({},o,{innerProps:d,isDisabled:a,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator,o=r.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,a=this.props.isDisabled,c=this.state.isFocused;return y.createElement(o,R({},l,{isDisabled:a,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,a=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(s,R({},o,{innerProps:c,isDisabled:l,isFocused:a}))}},{key:"renderMenu",value:function(){var r=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,a=s.Menu,c=s.MenuList,u=s.MenuPortal,d=s.LoadingMessage,h=s.NoOptionsMessage,f=s.Option,p=this.commonProps,v=this.state.focusedOption,m=this.props,g=m.captureMenuScroll,b=m.inputValue,w=m.isLoading,I=m.loadingMessage,S=m.minMenuHeight,T=m.maxMenuHeight,E=m.menuIsOpen,x=m.menuPlacement,L=m.menuPosition,B=m.menuPortalTarget,ee=m.menuShouldBlockScroll,Z=m.menuShouldScrollIntoView,ce=m.noOptionsMessage,be=m.onMenuScrollToTop,Y=m.onMenuScrollToBottom;if(!E)return null;var q=function(ie,K){var re=ie.type,Q=ie.data,se=ie.isDisabled,pe=ie.isSelected,X=ie.label,xe=ie.value,Ye=v===Q,ut=se?void 0:function(){return r.onOptionHover(Q)},vi=se?void 0:function(){return r.selectOption(Q)},cn="".concat(r.getElementId("option"),"-").concat(K),Ot={id:cn,onClick:vi,onMouseMove:ut,onMouseOver:ut,tabIndex:-1,role:"option","aria-selected":r.isAppleDevice?void 0:pe};return y.createElement(f,R({},p,{innerProps:Ot,data:Q,isDisabled:se,isSelected:pe,key:cn,label:X,type:re,value:xe,isFocused:Ye,innerRef:Ye?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(ie.data,"menu"))},ne;if(this.hasOptions())ne=this.getCategorizedOptions().map(function($){if($.type==="group"){var ie=$.data,K=$.options,re=$.index,Q="".concat(r.getElementId("group"),"-").concat(re),se="".concat(Q,"-heading");return y.createElement(o,R({},p,{key:Q,data:ie,options:K,Heading:l,headingProps:{id:se,data:$.data},label:r.formatGroupLabel($.data)}),$.options.map(function(pe){return q(pe,"".concat(re,"-").concat(pe.index))}))}else if($.type==="option")return q($,"".concat($.index))});else if(w){var ae=I({inputValue:b});if(ae===null)return null;ne=y.createElement(d,p,ae)}else{var ge=ce({inputValue:b});if(ge===null)return null;ne=y.createElement(h,p,ge)}var Ce={minMenuHeight:S,maxMenuHeight:T,menuPlacement:x,menuPosition:L,menuShouldScrollIntoView:Z},Re=y.createElement(Lh,R({},p,Ce),function($){var ie=$.ref,K=$.placerProps,re=K.placement,Q=K.maxHeight;return y.createElement(a,R({},p,Ce,{innerRef:ie,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove},isLoading:w,placement:re}),y.createElement(up,{captureEnabled:g,onTopArrive:be,onBottomArrive:Y,lockEnabled:ee},function(se){return y.createElement(c,R({},p,{innerRef:function(X){r.getMenuListRef(X),se(X)},innerProps:{role:"listbox","aria-multiselectable":p.isMulti,id:r.getElementId("listbox")},isLoading:w,maxHeight:Q,focusedOption:v}),ne)}))});return B||L==="fixed"?y.createElement(u,R({},p,{appendTo:B,controlElement:this.controlRef,menuPlacement:x,menuPosition:L}),Re):Re}},{key:"renderFormField",value:function(){var r=this,s=this.props,o=s.delimiter,l=s.isDisabled,a=s.isMulti,c=s.name,u=s.required,d=this.state.selectValue;if(u&&!this.hasValue()&&!l)return y.createElement(fp,{name:c,onFocus:this.onValueInputFocus});if(!(!c||l))if(a)if(o){var h=d.map(function(v){return r.getOptionValue(v)}).join(o);return y.createElement("input",{name:c,type:"hidden",value:h})}else{var f=d.length>0?d.map(function(v,m){return y.createElement("input",{key:"i-".concat(m),name:c,type:"hidden",value:r.getOptionValue(v)})}):y.createElement("input",{name:c,type:"hidden",value:""});return y.createElement("div",null,f)}else{var p=d[0]?this.getOptionValue(d[0]):"";return y.createElement("input",{name:c,type:"hidden",value:p})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,a=s.focusedValue,c=s.isFocused,u=s.selectValue,d=this.getFocusableOptions();return y.createElement(Zf,R({},r,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:a,isFocused:c,selectValue:u,focusableOptions:d,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var r=this.getComponents(),s=r.Control,o=r.IndicatorsContainer,l=r.SelectContainer,a=r.ValueContainer,c=this.props,u=c.className,d=c.id,h=c.isDisabled,f=c.menuIsOpen,p=this.state.isFocused,v=this.commonProps=this.getCommonProps();return y.createElement(l,R({},v,{className:u,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:p}),this.renderLiveRegion(),y.createElement(s,R({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:p,menuIsOpen:f}),y.createElement(a,R({},v,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),y.createElement(o,R({},v,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,a=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,u=s.isFocused,d=s.prevWasFocused,h=s.instancePrefix,f=r.options,p=r.value,v=r.menuIsOpen,m=r.inputValue,g=r.isMulti,b=Ss(p),w={};if(o&&(p!==o.value||f!==o.options||v!==o.menuIsOpen||m!==o.inputValue)){var I=v?Pp(r,b):[],S=v?Vs(Sn(r,b),"".concat(h,"-option")):[],T=l?Rp(s,b):null,E=Np(s,I),x=Ti(S,E);w={selectValue:b,focusedOption:E,focusedOptionId:x,focusableOptionsWithIds:S,focusedValue:T,clearFocusValueOnUpdate:!1}}var L=a!=null&&r!==o?{inputIsHidden:a,inputIsHiddenAfterUpdate:void 0}:{},B=c,ee=u&&d;return u&&!ee&&(B={value:vn(g,b,b[0]||null),options:b,action:"initial-input-focus"},ee=!d),(c==null?void 0:c.action)==="initial-input-focus"&&(B=null),P(P(P({},w),L),{},{prevProps:r,ariaSelection:B,prevWasFocused:ee})}}]),n}(y.Component);Ta.defaultProps=Op;var Mp=y.forwardRef(function(t,e){var n=Gu(t);return y.createElement(Ta,R({ref:e},n))}),Ap=Mp;const Lp="_wrap_97yey_1",Dp="_label_97yey_21",Fp="_select_97yey_31",Oi={wrap:Lp,label:Dp,select:Fp},Vp=[{value:"name",label:"A to Z"},{value:"name desc",label:"Z to A"},{value:"price_per_hour",label:"Price from the lowest"},{value:"price_per_hour desc",label:"Price from the highest"},{value:"rating",label:"Popular from the lowest"},{value:"rating desc",label:"Popular from the highest"},{value:"all",label:"Show all"}],t_=({selectedOption:t,setSelectedOption:e})=>_.jsx("div",{className:Oi.wrap,children:_.jsxs("label",{className:Oi.label,children:["Filters",_.jsx(Ap,{className:Oi.select,defaultValue:t,onChange:e,options:Vp,components:{IndicatorSeparator:()=>null},"aria-label":"Filters",placeholder:"A to Z",styles:{control:(n,i)=>({...n,borderRadius:"14px",boxShadow:(i.isFocused,"var(--green)"),width:"226px",height:"48px",cursor:"pointer",backgroundColor:"var(--green)",borderColor:"var(--light-green)",":hover":{borderColor:"var(--green)"},caretColor:"transparent"}),singleValue:n=>({...n,color:"var(--white)"}),dropdownIndicator:(n,i)=>({...n,color:(i.isFocused,"var(--white)"),transform:i.isFocused?"rotate(0deg)":"rotate(180deg)",":hover":{color:"var(--white)",transform:"rotate(0deg)"},":active":{transform:"rotate(0deg)"}}),option:(n,i)=>({...n,color:i.isSelected?"var(--black)":"rgba(25, 26, 21, 0.3)",backgroundColor:i.isFocused?"rgba(84, 190, 150, 0.2)":"var(--white)",boxShadow:i.isFocused?"rgba(84, 190, 150, 0.2)":"var(--white)",cursor:"pointer",":active":{backgroundColor:(i.isSelected,"rgba(84, 190, 150, 0.2)")}}),menu:n=>({...n,borderRadius:"14px",":active":{dropdownIndicator:i=>({...i,transform:"rotate(180deg)"})}}),placeholder:n=>({...n,color:"var(--white)"}),menuList:n=>({...n,borderRadius:"14px",color:"var(--white)",":active":{dropdownIndicator:i=>({...i,transform:"rotate(180deg)"})}})}})]})});var $s={};const Ws="@firebase/database",Hs="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="";function jp(t){Oa=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),he(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:or(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ve(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $p(e)}}catch{}return new Wp},tt=Pa("localStorage"),Hp=Pa("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt=new ec("@firebase/database"),Up=function(){let t=1;return function(){return t++}}(),Ra=function(t){const e=ac(t),n=new lc;n.update(e);const i=n.digest();return cc.encodeByteArray(i)},nn=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=nn.apply(null,i):typeof i=="object"?e+=he(i):e+=i,e+=" "}return e};let Ft=null,Us=!0;const Bp=function(t,e){C(!e,"Can't turn on custom loggers persistently."),yt.logLevel=uc.VERBOSE,Ft=yt.log.bind(yt)},_e=function(...t){if(Us===!0&&(Us=!1,Ft===null&&Hp.get("logging_enabled")===!0&&Bp()),Ft){const e=nn.apply(null,t);Ft(e)}},rn=function(t){return function(...e){_e(t,...e)}},Yi=function(...t){const e="FIREBASE INTERNAL ERROR: "+nn(...t);yt.error(e)},qe=function(...t){const e=`FIREBASE FATAL ERROR: ${nn(...t)}`;throw yt.error(e),new Error(e)},Oe=function(...t){const e="FIREBASE WARNING: "+nn(...t);yt.warn(e)},qp=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Oe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Sr=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},zp=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},it="[MIN_NAME]",ze="[MAX_NAME]",xt=function(t,e){if(t===e)return 0;if(t===it||e===ze)return-1;if(e===it||t===ze)return 1;{const n=Bs(t),i=Bs(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},Gp=function(t,e){return t===e?0:t<e?-1:1},kt=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+he(e))},Er=function(t){if(typeof t!="object"||t===null)return he(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=he(e[i]),n+=":",n+=Er(t[e[i]]);return n+="}",n},Na=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Ie(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ka=function(t){C(!Sr(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,l,a;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=l+i,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(a=n;a;a-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(a=0;a<64;a+=8){let h=parseInt(u.substr(a,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Yp=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Kp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Qp(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const Xp=new RegExp("^-?(0*)\\d{1,10}$"),Zp=-2147483648,Jp=2147483647,Bs=function(t){if(Xp.test(t)){const e=Number(t);if(e>=Zp&&e<=Jp)return e}return null},sn=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Oe("Exception was thrown by user callback.",n),e},Math.floor(0))}},em=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vt=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Oe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_e("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oe(e)}}class En{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}En.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="5",Ma="v",Aa="s",La="r",Da="f",Fa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Va="ls",ja="p",Ki="ac",$a="websocket",Wa="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n,i,r,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tt.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function im(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ua(t,e,n){C(typeof e=="string","typeof type must == string"),C(typeof n=="object","typeof params must == object");let i;if(e===$a)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Wa)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);im(t)&&(n.ns=t.namespace);const r=[];return Ie(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.counters_={}}incrementCounter(e,n=1){Ve(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return mc(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi={},Ri={};function xr(t){const e=t.toString();return Pi[e]||(Pi[e]=new rm),Pi[e]}function sm(t,e){const n=t.toString();return Ri[n]||(Ri[n]=e()),Ri[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&sn(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="start",am="close",lm="pLPCommand",cm="pRTLPCB",Ba="id",qa="pw",za="ser",um="cb",dm="seg",hm="ts",fm="d",pm="dframe",Ga=1870,Ya=30,mm=Ga-Ya,gm=25e3,vm=3e4;class mt{constructor(e,n,i,r,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rn(e),this.stats_=xr(n),this.urlFn=a=>(this.appCheckToken&&(a[Ki]=this.appCheckToken),Ua(n,Wa,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new om(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(vm)),zp(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tr((...s)=>{const[o,l,a,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===qs)this.id=l,this.password=a;else if(o===am)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[qs]="t",i[za]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[um]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Ma]=Ir,this.transportSessionId&&(i[Aa]=this.transportSessionId),this.lastSessionId&&(i[Va]=this.lastSessionId),this.applicationId&&(i[ja]=this.applicationId),this.appCheckToken&&(i[Ki]=this.appCheckToken),typeof location<"u"&&location.hostname&&Fa.test(location.hostname)&&(i[La]=Da);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mt.forceAllow_=!0}static forceDisallow(){mt.forceDisallow_=!0}static isAvailable(){return mt.forceAllow_?!0:!mt.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Yp()&&!Kp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=he(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=vc(n),r=Na(i,mm);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[pm]="t",i[Ba]=e,i[qa]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=he(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Tr{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Up(),window[lm+this.uniqueCallbackIdentifier]=e,window[cm+this.uniqueCallbackIdentifier]=n,this.myIFrame=Tr.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){_e("frame writing exception"),l.stack&&_e(l.stack),_e(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_e("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ba]=this.myID,e[qa]=this.myPW,e[za]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ya+i.length<=Ga;){const o=this.pendingSegs.shift();i=i+"&"+dm+r+"="+o.seg+"&"+hm+r+"="+o.ts+"&"+fm+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(gm)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{_e("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=16384,ym=45e3;let An=null;typeof MozWebSocket<"u"?An=MozWebSocket:typeof WebSocket<"u"&&(An=WebSocket);class Ne{constructor(e,n,i,r,s,o,l){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rn(this.connId),this.stats_=xr(n),this.connURL=Ne.connectionURL_(n,o,l,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const o={};return o[Ma]=Ir,typeof location<"u"&&location.hostname&&Fa.test(location.hostname)&&(o[La]=Da),n&&(o[Aa]=n),i&&(o[Va]=i),r&&(o[Ki]=r),s&&(o[ja]=s),Ua(e,$a,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tt.set("previous_websocket_failure",!0);try{let i;Ro(),this.mySock=new An(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Ne.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&An!==null&&!Ne.forceDisallow_}static previouslyFailed(){return tt.isInMemoryStorage||tt.get("previous_websocket_failure")===!0}markConnectionHealthy(){tt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=or(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(C(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=he(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Na(n,_m);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ym))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ne.responsesRequiredToBeHealthy=2;Ne.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mt,Ne]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ne&&Ne.isAvailable();let i=n&&!Ne.previouslyFailed();if(e.webSocketOnly&&(n||Oe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ne];else{const r=this.transports_=[];for(const s of Gt.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Gt.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Gt.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=6e4,Cm=5e3,wm=10*1024,Sm=100*1024,Ni="t",zs="d",Em="s",Gs="r",Im="e",Ys="o",Ks="a",Qs="n",Xs="p",xm="h";class Tm{constructor(e,n,i,r,s,o,l,a,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rn("c:"+this.id+":"),this.transportManager_=new Gt(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Vt(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Sm?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>wm?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ni in e){const n=e[Ni];n===Ks?this.upgradeIfSecondaryHealthy_():n===Gs?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ys&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=kt("t",e),i=kt("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Xs,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ks,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Qs,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=kt("t",e),i=kt("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=kt(Ni,e);if(zs in e){const i=e[zs];if(n===xm){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Qs){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Em?this.onConnectionShutdown_(i):n===Gs?this.onReset_(i):n===Im?Yi("Server Error: "+i):n===Ys?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yi("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ir!==i&&Oe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Vt(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bm))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vt(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Cm))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Xs,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){C(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends Qa{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ko()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ln}getInitialEvent(e){return C(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=32,Js=768;class U{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function j(){return new U("")}function A(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xe(t){return t.pieces_.length-t.pieceNum_}function z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new U(t.pieces_,e)}function Xa(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Om(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Za(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ja(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new U(e,0)}function le(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof U)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new U(n,0)}function k(t){return t.pieceNum_>=t.pieces_.length}function we(t,e){const n=A(t),i=A(e);if(n===null)return e;if(n===i)return we(z(t),z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Or(t,e){if(Xe(t)!==Xe(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function ke(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Xe(t)>Xe(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class Pm{constructor(e,n){this.errorPrefix_=n,this.parts_=Za(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Gn(this.parts_[i]);el(this)}}function Rm(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Gn(e),el(t)}function Nm(t){const e=t.parts_.pop();t.byteLength_-=Gn(e),t.parts_.length>0&&(t.byteLength_-=1)}function el(t){if(t.byteLength_>Js)throw new Error(t.errorPrefix_+"has a key path longer than "+Js+" bytes ("+t.byteLength_+").");if(t.parts_.length>Zs)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zs+") or object contains a cycle "+et(t))}function et(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Qa{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Pr}getInitialEvent(e){return C(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt=1e3,km=60*5*1e3,eo=30*1e3,Mm=1.3,Am=3e4,Lm="server_kill",to=3;class He extends Ka{constructor(e,n,i,r,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=He.nextPersistentConnectionId_++,this.log_=rn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mt,this.maxReconnectDelay_=km,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Ro())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pr.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ln.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(he(s)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new No,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,c=l.s;He.warnOnListenWarnings_(a,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ve(e,"w")){const i=Ct(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Oe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||dc(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=eo)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=hc(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+he(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Yi("Unrecognized action received from server: "+he(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Am&&(this.reconnectDelay_=Mt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Mm)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+He.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,i())},c=function(d){C(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?_e("getToken() completed but was canceled"):(_e("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,l=new Tm(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{Oe(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(Lm)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Oe(d),a())}}}interrupt(e){_e("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_e("Resuming connection for reason: "+e),delete this.interruptReasons_[e],os(this.interruptReasons_)&&(this.reconnectDelay_=Mt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>Er(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new U(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){_e("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=to&&(this.reconnectDelay_=eo,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_e("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=to&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Oa.replace(/\./g,"-")]=1,ko()?e["framework.cordova"]=1:fc()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ln.getInstance().currentlyOnline();return os(this.interruptReasons_)&&e}}He.nextPersistentConnectionId_=0;He.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new M(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new M(it,e),r=new M(it,n);return this.compare(i,r)!==0}minPost(){return M.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n;class tl extends li{static get __EMPTY_NODE(){return _n}static set __EMPTY_NODE(e){_n=e}compare(e,n){return xt(e.name,n.name)}isDefinedOn(e){throw en("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return M.MIN}maxPost(){return new M(ze,_n)}makePost(e,n){return C(typeof e=="string","KeyIndex indexValue must always be a string."),new M(e,_n)}toString(){return".key"}}const Ue=new tl;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class de{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??de.RED,this.left=r??Se.EMPTY_NODE,this.right=s??Se.EMPTY_NODE}copy(e,n,i,r,s){return new de(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Se.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Se.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}de.RED=!0;de.BLACK=!1;class Dm{copy(e,n,i,r,s){return this}insert(e,n,i){return new de(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Se{constructor(e,n=Se.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Se(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,de.BLACK,null,null))}remove(e){return new Se(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,de.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yn(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new yn(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new yn(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new yn(this.root_,null,this.comparator_,!0,e)}}Se.EMPTY_NODE=new Dm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e){return xt(t.name,e.name)}function Rr(t,e){return xt(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi;function Vm(t){Qi=t}const nl=function(t){return typeof t=="number"?"number:"+ka(t):"string:"+t},il=function(t){if(t.isLeafNode()){const e=t.val();C(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ve(e,".sv"),"Priority must be a string or number.")}else C(t===Qi||t.isEmpty(),"priority of unexpected type.");C(t===Qi||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no;class ue{constructor(e,n=ue.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,C(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),il(this.priorityNode_)}static set __childrenNodeConstructor(e){no=e}static get __childrenNodeConstructor(){return no}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ue(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ue.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return k(e)?this:A(e)===".priority"?this.priorityNode_:ue.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ue.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=A(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(C(i!==".priority"||Xe(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ue.__childrenNodeConstructor.EMPTY_NODE.updateChild(z(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nl(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ka(this.value_):e+=this.value_,this.lazyHash_=Ra(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ue.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ue.__childrenNodeConstructor?-1:(C(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=ue.VALUE_TYPE_ORDER.indexOf(n),s=ue.VALUE_TYPE_ORDER.indexOf(i);return C(r>=0,"Unknown leaf type: "+n),C(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ue.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl,sl;function jm(t){rl=t}function $m(t){sl=t}class Wm extends li{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?xt(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return M.MIN}maxPost(){return new M(ze,new ue("[PRIORITY-POST]",sl))}makePost(e,n){const i=rl(e);return new M(n,new ue("[PRIORITY-POST]",i))}toString(){return".priority"}}const J=new Wm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=Math.log(2);class Um{constructor(e){const n=s=>parseInt(Math.log(s)/Hm,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Dn=function(t,e,n,i){t.sort(e);const r=function(a,c){const u=c-a;let d,h;if(u===0)return null;if(u===1)return d=t[a],h=n?n(d):d,new de(h,d.node,de.BLACK,null,null);{const f=parseInt(u/2,10)+a,p=r(a,f),v=r(f+1,c);return d=t[f],h=n?n(d):d,new de(h,d.node,de.BLACK,p,v)}},s=function(a){let c=null,u=null,d=t.length;const h=function(p,v){const m=d-p,g=d;d-=p;const b=r(m+1,g),w=t[m],I=n?n(w):w;f(new de(I,w.node,v,null,b))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<a.count;++p){const v=a.nextBitIsOne(),m=Math.pow(2,a.count-(p+1));v?h(m,de.BLACK):(h(m,de.BLACK),h(m,de.RED))}return u},o=new Um(t.length),l=s(o);return new Se(i||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki;const pt={};class $e{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return C(pt&&J,"ChildrenNode.ts has not been loaded"),ki=ki||new $e({".priority":pt},{".priority":J}),ki}get(e){const n=Ct(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Se?n:null}hasIndex(e){return Ve(this.indexSet_,e.toString())}addIndex(e,n){C(e!==Ue,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(M.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let l;r?l=Dn(i,e.getCompare()):l=pt;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const u=Object.assign({},this.indexes_);return u[a]=l,new $e(u,c)}addToIndexes(e,n){const i=In(this.indexes_,(r,s)=>{const o=Ct(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),r===pt)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(M.Wrap);let c=a.getNext();for(;c;)c.name!==e.name&&l.push(c),c=a.getNext();return l.push(e),Dn(l,o.getCompare())}else return pt;else{const l=n.get(e.name);let a=r;return l&&(a=a.remove(new M(e.name,l))),a.insert(e,e.node)}});return new $e(i,this.indexSet_)}removeFromIndexes(e,n){const i=In(this.indexes_,r=>{if(r===pt)return r;{const s=n.get(e.name);return s?r.remove(new M(e.name,s)):r}});return new $e(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At;class N{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&il(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return At||(At=new N(new Se(Rr),null,$e.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||At}updatePriority(e){return this.children_.isEmpty()?this:new N(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?At:n}}getChild(e){const n=A(e);return n===null?this:this.getImmediateChild(n).getChild(z(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(C(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new M(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?At:this.priorityNode_;return new N(r,o,s)}}updateChild(e,n){const i=A(e);if(i===null)return n;{C(A(e)!==".priority"||Xe(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(z(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(J,(o,l)=>{n[o]=l.val(e),i++,s&&N.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+nl(this.getPriority().val())+":"),this.forEachChild(J,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":Ra(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new M(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new M(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new M(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,M.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,M.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===on?-1:0}withIndex(e){if(e===Ue||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new N(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ue||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(J),r=n.getIterator(J);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ue?null:this.indexMap_.get(e.toString())}}N.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Bm extends N{constructor(){super(new Se(Rr),N.EMPTY_NODE,$e.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return N.EMPTY_NODE}isEmpty(){return!1}}const on=new Bm;Object.defineProperties(M,{MIN:{value:new M(it,N.EMPTY_NODE)},MAX:{value:new M(ze,on)}});tl.__EMPTY_NODE=N.EMPTY_NODE;ue.__childrenNodeConstructor=N;Vm(on);$m(on);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=!0;function ye(t,e=null){if(t===null)return N.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),C(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ue(n,ye(e))}if(!(t instanceof Array)&&qm){const n=[];let i=!1;if(Ie(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=ye(l);a.isEmpty()||(i=i||!a.getPriority().isEmpty(),n.push(new M(o,a)))}}),n.length===0)return N.EMPTY_NODE;const s=Dn(n,Fm,o=>o.name,Rr);if(i){const o=Dn(n,J.getCompare());return new N(s,ye(e),new $e({".priority":o},{".priority":J}))}else return new N(s,ye(e),$e.Default)}else{let n=N.EMPTY_NODE;return Ie(t,(i,r)=>{if(Ve(t,i)&&i.substring(0,1)!=="."){const s=ye(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(ye(e))}}jm(ye);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends li{constructor(e){super(),this.indexPath_=e,C(!k(e)&&A(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?xt(e.name,n.name):s}makePost(e,n){const i=ye(e),r=N.EMPTY_NODE.updateChild(this.indexPath_,i);return new M(n,r)}maxPost(){const e=N.EMPTY_NODE.updateChild(this.indexPath_,on);return new M(ze,e)}toString(){return Za(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends li{compare(e,n){const i=e.node.compareTo(n.node);return i===0?xt(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return M.MIN}maxPost(){return M.MAX}makePost(e,n){const i=ye(e);return new M(n,i)}toString(){return".value"}}const ol=new zm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){return{type:"value",snapshotNode:t}}function St(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yt(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Kt(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Gm(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(r).equals(i.getChild(r))&&l.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(Yt(n,l)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(St(n,i)):o.trackChildChange(Kt(n,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(J,(r,s)=>{n.hasChild(r)||i.trackChildChange(Yt(r,s))}),n.isLeafNode()||n.forEachChild(J,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Kt(r,s,o))}else i.trackChildChange(St(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?N.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.indexedFilter_=new kr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Qt.getStartPost_(e),this.endPost_=Qt.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,o){return this.matches(new M(n,i))||(i=N.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=N.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(N.EMPTY_NODE);const s=this;return n.forEachChild(J,(o,l)=>{s.matches(new M(o,l))||(r=r.updateImmediateChild(o,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Qt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new M(n,i))||(i=N.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=N.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=N.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))r=r.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(N.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:r=r.updateImmediateChild(l.name,N.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const l=e;C(l.numChildren()===this.limit_,"");const a=new M(n,i),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||l.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,a);if(u&&!i.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(Kt(n,i,d)),l.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(Yt(n,d));const v=l.updateImmediateChild(n,N.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(St(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return i.isEmpty()?e:u&&o(c,a)>=0?(s!=null&&(s.trackChildChange(Yt(c.name,c.node)),s.trackChildChange(St(n,i))),l.updateImmediateChild(n,i).updateImmediateChild(c.name,N.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=J}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:it}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ze}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===J}copy(){const e=new Mr;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Km(t){return t.loadsAllData()?new kr(t.getIndex()):t.hasLimit()?new Ym(t):new Qt(t)}function io(t,e,n){const i=t.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function Qm(t,e,n){let i;return t.index_===Ue||n?i=io(t,e,n):i=io(t,e,ze),i.startAfterSet_=!0,i}function Xm(t,e,n){const i=t.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function ll(t,e){const n=t.copy();return n.index_=e,n}function ro(t){const e={};if(t.isDefault())return e;let n;if(t.index_===J?n="$priority":t.index_===ol?n="$value":t.index_===Ue?n="$key":(C(t.index_ instanceof Nr,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=he(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=he(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+he(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=he(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+he(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function so(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==J&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends Ka{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=rn("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Fn.getListenId_(e,i),l={};this.listens_[o]=l;const a=ro(e._queryParams);this.restRequest_(s+".json",a,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,i),Ct(this.listens_,o)===l){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(e,n){const i=Fn.getListenId_(e,n);delete this.listens_[i]}get(e){const n=ro(e._queryParams),i=e._path.toString(),r=new No;return this.restRequest_(i+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(i,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pc(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=or(l.responseText)}catch{Oe("Failed to parse JSON response for "+o+": "+l.responseText)}i(null,a)}else l.status!==401&&l.status!==404&&Oe("Got unsuccessful REST response for "+o+" Status: "+l.status),i(l.status);i=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return{value:null,children:new Map}}function cl(t,e,n){if(k(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=A(e);t.children.has(i)||t.children.set(i,Vn());const r=t.children.get(i);e=z(e),cl(r,e,n)}}function Xi(t,e,n){t.value!==null?n(e,t.value):Jm(t,(i,r)=>{const s=new U(e.toString()+"/"+i);Xi(r,s,n)})}function Jm(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ie(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=10*1e3,tg=30*1e3,ng=5*60*1e3;class ig{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new eg(e);const i=oo+(tg-oo)*Math.random();Vt(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Ie(e,(r,s)=>{s>0&&Ve(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Vt(this.reportStats_.bind(this),Math.floor(Math.random()*2*ng))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Me||(Me={}));function ul(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ar(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Lr(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Me.ACK_USER_WRITE,this.source=ul()}operationForChild(e){if(k(this.path)){if(this.affectedTree.value!=null)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new U(e));return new jn(j(),n,this.revert)}}else return C(A(this.path)===e,"operationForChild called for unrelated child."),new jn(z(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.source=e,this.path=n,this.type=Me.LISTEN_COMPLETE}operationForChild(e){return k(this.path)?new Xt(this.source,j()):new Xt(this.source,z(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Me.OVERWRITE}operationForChild(e){return k(this.path)?new rt(this.source,j(),this.snap.getImmediateChild(e)):new rt(this.source,z(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Me.MERGE}operationForChild(e){if(k(this.path)){const n=this.children.subtree(new U(e));return n.isEmpty()?null:n.value?new rt(this.source,j(),n.value):new Zt(this.source,j(),n)}else return C(A(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zt(this.source,z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(k(e))return this.isFullyInitialized()&&!this.filtered_;const n=A(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function sg(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Gm(o.childName,o.snapshotNode))}),Lt(t,r,"child_removed",e,i,n),Lt(t,r,"child_added",e,i,n),Lt(t,r,"child_moved",s,i,n),Lt(t,r,"child_changed",e,i,n),Lt(t,r,"value",e,i,n),r}function Lt(t,e,n,i,r,s){const o=i.filter(l=>l.type===n);o.sort((l,a)=>ag(t,l,a)),o.forEach(l=>{const a=og(t,l,s);r.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(a,t.query_))})})}function og(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ag(t,e,n){if(e.childName==null||n.childName==null)throw en("Should only compare child_ events.");const i=new M(e.childName,e.snapshotNode),r=new M(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t,e){return{eventCache:t,serverCache:e}}function jt(t,e,n,i){return ci(new st(e,n,i),t.serverCache)}function dl(t,e,n,i){return ci(t.eventCache,new st(e,n,i))}function Zi(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ot(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi;const lg=()=>(Mi||(Mi=new Se(Gp)),Mi);class G{constructor(e,n=lg()){this.value=e,this.children=n}static fromObject(e){let n=new G(null);return Ie(e,(i,r)=>{n=n.set(new U(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:j(),value:this.value};if(k(e))return null;{const i=A(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(z(e),n);return s!=null?{path:le(new U(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(k(e))return this;{const n=A(e),i=this.children.get(n);return i!==null?i.subtree(z(e)):new G(null)}}set(e,n){if(k(e))return new G(n,this.children);{const i=A(e),s=(this.children.get(i)||new G(null)).set(z(e),n),o=this.children.insert(i,s);return new G(this.value,o)}}remove(e){if(k(e))return this.children.isEmpty()?new G(null):new G(null,this.children);{const n=A(e),i=this.children.get(n);if(i){const r=i.remove(z(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new G(null):new G(this.value,s)}else return this}}get(e){if(k(e))return this.value;{const n=A(e),i=this.children.get(n);return i?i.get(z(e)):null}}setTree(e,n){if(k(e))return n;{const i=A(e),s=(this.children.get(i)||new G(null)).setTree(z(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new G(this.value,o)}}fold(e){return this.fold_(j(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(le(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,j(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(k(e))return null;{const s=A(e),o=this.children.get(s);return o?o.findOnPath_(z(e),le(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,j(),n)}foreachOnPath_(e,n,i){if(k(e))return this;{this.value&&i(n,this.value);const r=A(e),s=this.children.get(r);return s?s.foreachOnPath_(z(e),le(n,r),i):new G(null)}}foreach(e){this.foreach_(j(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(le(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.writeTree_=e}static empty(){return new Ae(new G(null))}}function $t(t,e,n){if(k(e))return new Ae(new G(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=we(r,e);return s=s.updateChild(o,n),new Ae(t.writeTree_.set(r,s))}else{const r=new G(n),s=t.writeTree_.setTree(e,r);return new Ae(s)}}}function ao(t,e,n){let i=t;return Ie(n,(r,s)=>{i=$t(i,le(e,r),s)}),i}function lo(t,e){if(k(e))return Ae.empty();{const n=t.writeTree_.setTree(e,new G(null));return new Ae(n)}}function Ji(t,e){return at(t,e)!=null}function at(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(we(n.path,e)):null}function co(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(J,(i,r)=>{e.push(new M(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new M(i,r.value))}),e}function Qe(t,e){if(k(e))return t;{const n=at(t,e);return n!=null?new Ae(new G(n)):new Ae(t.writeTree_.subtree(e))}}function er(t){return t.writeTree_.isEmpty()}function Et(t,e){return hl(j(),t.writeTree_,e)}function hl(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(C(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=hl(le(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(le(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,e){return gl(e,t)}function cg(t,e,n,i,r){C(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=$t(t.visibleWrites,e,n)),t.lastWriteId=i}function ug(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function dg(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);C(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&hg(l,i.path)?r=!1:ke(i.path,l.path)&&(s=!0)),o--}if(r){if(s)return fg(t),!0;if(i.snap)t.visibleWrites=lo(t.visibleWrites,i.path);else{const l=i.children;Ie(l,a=>{t.visibleWrites=lo(t.visibleWrites,le(i.path,a))})}return!0}else return!1}function hg(t,e){if(t.snap)return ke(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ke(le(t.path,n),e))return!0;return!1}function fg(t){t.visibleWrites=fl(t.allWrites,pg,j()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function pg(t){return t.visible}function fl(t,e,n){let i=Ae.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let l;if(s.snap)ke(n,o)?(l=we(n,o),i=$t(i,l,s.snap)):ke(o,n)&&(l=we(o,n),i=$t(i,j(),s.snap.getChild(l)));else if(s.children){if(ke(n,o))l=we(n,o),i=ao(i,l,s.children);else if(ke(o,n))if(l=we(o,n),k(l))i=ao(i,j(),s.children);else{const a=Ct(s.children,A(l));if(a){const c=a.getChild(z(l));i=$t(i,j(),c)}}}else throw en("WriteRecord should have .snap or .children")}}return i}function pl(t,e,n,i,r){if(!i&&!r){const s=at(t.visibleWrites,e);if(s!=null)return s;{const o=Qe(t.visibleWrites,e);if(er(o))return n;if(n==null&&!Ji(o,j()))return null;{const l=n||N.EMPTY_NODE;return Et(o,l)}}}else{const s=Qe(t.visibleWrites,e);if(!r&&er(s))return n;if(!r&&n==null&&!Ji(s,j()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(ke(c.path,e)||ke(e,c.path))},l=fl(t.allWrites,o,e),a=n||N.EMPTY_NODE;return Et(l,a)}}}function mg(t,e,n){let i=N.EMPTY_NODE;const r=at(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(J,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=Qe(t.visibleWrites,e);return n.forEachChild(J,(o,l)=>{const a=Et(Qe(s,new U(o)),l);i=i.updateImmediateChild(o,a)}),co(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=Qe(t.visibleWrites,e);return co(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function gg(t,e,n,i,r){C(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=le(e,n);if(Ji(t.visibleWrites,s))return null;{const o=Qe(t.visibleWrites,s);return er(o)?r.getChild(n):Et(o,r.getChild(n))}}function vg(t,e,n,i){const r=le(e,n),s=at(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=Qe(t.visibleWrites,r);return Et(o,i.getNode().getImmediateChild(n))}else return null}function _g(t,e){return at(t.visibleWrites,e)}function yg(t,e,n,i,r,s,o){let l;const a=Qe(t.visibleWrites,e),c=at(a,j());if(c!=null)l=c;else if(n!=null)l=Et(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const u=[],d=o.getCompare(),h=s?l.getReverseIteratorFrom(i,o):l.getIteratorFrom(i,o);let f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function bg(){return{visibleWrites:Ae.empty(),allWrites:[],lastWriteId:-1}}function $n(t,e,n,i){return pl(t.writeTree,t.treePath,e,n,i)}function Fr(t,e){return mg(t.writeTree,t.treePath,e)}function uo(t,e,n,i){return gg(t.writeTree,t.treePath,e,n,i)}function Wn(t,e){return _g(t.writeTree,le(t.treePath,e))}function Cg(t,e,n,i,r,s){return yg(t.writeTree,t.treePath,e,n,i,r,s)}function Vr(t,e,n){return vg(t.writeTree,t.treePath,e,n)}function ml(t,e){return gl(le(t.treePath,e),t.writeTree)}function gl(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;C(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),C(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,Kt(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,Yt(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,St(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,Kt(i,e.snapshotNode,r.oldSnap));else throw en("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const vl=new Sg;class jr{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new st(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vr(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ot(this.viewCache_),s=Cg(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){return{filter:t}}function Ig(t,e){C(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function xg(t,e,n,i,r){const s=new wg;let o,l;if(n.type===Me.OVERWRITE){const c=n;c.source.fromUser?o=tr(t,e,c.path,c.snap,i,r,s):(C(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!k(c.path),o=Hn(t,e,c.path,c.snap,i,r,l,s))}else if(n.type===Me.MERGE){const c=n;c.source.fromUser?o=Og(t,e,c.path,c.children,i,r,s):(C(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),o=nr(t,e,c.path,c.children,i,r,l,s))}else if(n.type===Me.ACK_USER_WRITE){const c=n;c.revert?o=Ng(t,e,c.path,i,r,s):o=Pg(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===Me.LISTEN_COMPLETE)o=Rg(t,e,n.path,i,s);else throw en("Unknown operation type: "+n.type);const a=s.getChanges();return Tg(e,o,a),{viewCache:o,changes:a}}function Tg(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Zi(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(al(Zi(e)))}}function _l(t,e,n,i,r,s){const o=e.eventCache;if(Wn(i,n)!=null)return e;{let l,a;if(k(n))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ot(e),u=c instanceof N?c:N.EMPTY_NODE,d=Fr(i,u);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=$n(i,ot(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=A(n);if(c===".priority"){C(Xe(n)===1,"Can't have a priority with additional path components");const u=o.getNode();a=e.serverCache.getNode();const d=uo(i,n,u,a);d!=null?l=t.filter.updatePriority(u,d):l=o.getNode()}else{const u=z(n);let d;if(o.isCompleteForChild(c)){a=e.serverCache.getNode();const h=uo(i,n,o.getNode(),a);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=Vr(i,c,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),c,d,u,r,s):l=o.getNode()}}return jt(e,l,o.isFullyInitialized()||k(n),t.filter.filtersNodes())}}function Hn(t,e,n,i,r,s,o,l){const a=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(k(n))c=u.updateFullNode(a.getNode(),i,null);else if(u.filtersNodes()&&!a.isFiltered()){const f=a.getNode().updateChild(n,i);c=u.updateFullNode(a.getNode(),f,null)}else{const f=A(n);if(!a.isCompleteForPath(n)&&Xe(n)>1)return e;const p=z(n),m=a.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(a.getNode(),m):c=u.updateChild(a.getNode(),f,m,p,vl,null)}const d=dl(e,c,a.isFullyInitialized()||k(n),u.filtersNodes()),h=new jr(r,d,s);return _l(t,d,n,r,h,l)}function tr(t,e,n,i,r,s,o){const l=e.eventCache;let a,c;const u=new jr(r,e,s);if(k(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),a=jt(e,c,!0,t.filter.filtersNodes());else{const d=A(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),a=jt(e,c,l.isFullyInitialized(),l.isFiltered());else{const h=z(n),f=l.getNode().getImmediateChild(d);let p;if(k(h))p=i;else{const v=u.getCompleteChild(d);v!=null?Xa(h)===".priority"&&v.getChild(Ja(h)).isEmpty()?p=v:p=v.updateChild(h,i):p=N.EMPTY_NODE}if(f.equals(p))a=e;else{const v=t.filter.updateChild(l.getNode(),d,p,h,u,o);a=jt(e,v,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function ho(t,e){return t.eventCache.isCompleteForChild(e)}function Og(t,e,n,i,r,s,o){let l=e;return i.foreach((a,c)=>{const u=le(n,a);ho(e,A(u))&&(l=tr(t,l,u,c,r,s,o))}),i.foreach((a,c)=>{const u=le(n,a);ho(e,A(u))||(l=tr(t,l,u,c,r,s,o))}),l}function fo(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function nr(t,e,n,i,r,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,c;k(n)?c=i:c=new G(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=fo(t,f,h);a=Hn(t,a,new U(d),p,r,s,o,l)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),v=fo(t,p,h);a=Hn(t,a,new U(d),v,r,s,o,l)}}),a}function Pg(t,e,n,i,r,s,o){if(Wn(r,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(i.value!=null){if(k(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Hn(t,e,n,a.getNode().getChild(n),r,s,l,o);if(k(n)){let c=new G(null);return a.getNode().forEachChild(Ue,(u,d)=>{c=c.set(new U(u),d)}),nr(t,e,n,c,r,s,l,o)}else return e}else{let c=new G(null);return i.foreach((u,d)=>{const h=le(n,u);a.isCompleteForPath(h)&&(c=c.set(u,a.getNode().getChild(h)))}),nr(t,e,n,c,r,s,l,o)}}function Rg(t,e,n,i,r){const s=e.serverCache,o=dl(e,s.getNode(),s.isFullyInitialized()||k(n),s.isFiltered());return _l(t,o,n,i,vl,r)}function Ng(t,e,n,i,r,s){let o;if(Wn(i,n)!=null)return e;{const l=new jr(i,e,r),a=e.eventCache.getNode();let c;if(k(n)||A(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=$n(i,ot(e));else{const d=e.serverCache.getNode();C(d instanceof N,"serverChildren would be complete if leaf node"),u=Fr(i,d)}u=u,c=t.filter.updateFullNode(a,u,s)}else{const u=A(n);let d=Vr(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=a.getImmediateChild(u)),d!=null?c=t.filter.updateChild(a,u,d,z(n),l,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(a,u,N.EMPTY_NODE,z(n),l,s):c=a,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=$n(i,ot(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Wn(i,j())!=null,jt(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new kr(i.getIndex()),s=Km(i);this.processor_=Eg(s);const o=n.serverCache,l=n.eventCache,a=r.updateFullNode(N.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(N.EMPTY_NODE,l.getNode(),null),u=new st(a,o.isFullyInitialized(),r.filtersNodes()),d=new st(c,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=ci(d,u),this.eventGenerator_=new rg(this.query_)}get query(){return this.query_}}function Mg(t){return t.viewCache_.serverCache.getNode()}function Ag(t,e){const n=ot(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!k(e)&&!n.getImmediateChild(A(e)).isEmpty())?n.getChild(e):null}function po(t){return t.eventRegistrations_.length===0}function Lg(t,e){t.eventRegistrations_.push(e)}function mo(t,e,n){const i=[];if(n){C(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function go(t,e,n,i){e.type===Me.MERGE&&e.source.queryId!==null&&(C(ot(t.viewCache_),"We should always have a full cache before handling merges"),C(Zi(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=xg(t.processor_,r,e,n,i);return Ig(t.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,yl(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Dg(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(J,(s,o)=>{i.push(St(s,o))}),n.isFullyInitialized()&&i.push(al(n.getNode())),yl(t,i,n.getNode(),e)}function yl(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return sg(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Un;class Fg{constructor(){this.views=new Map}}function Vg(t){C(!Un,"__referenceConstructor has already been defined"),Un=t}function jg(){return C(Un,"Reference.ts has not been loaded"),Un}function $g(t){return t.views.size===0}function $r(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return C(s!=null,"SyncTree gave us an op for an invalid query."),go(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(go(o,e,n,i));return s}}function Wg(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=$n(n,r?i:null),a=!1;l?a=!0:i instanceof N?(l=Fr(n,i),a=!1):(l=N.EMPTY_NODE,a=!1);const c=ci(new st(l,a,!1),new st(i,r,!1));return new kg(e,c)}return o}function Hg(t,e,n,i,r,s){const o=Wg(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Lg(o,n),Dg(o,n)}function Ug(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const l=Ze(t);if(r==="default")for(const[a,c]of t.views.entries())o=o.concat(mo(c,n,i)),po(c)&&(t.views.delete(a),c.query._queryParams.loadsAllData()||s.push(c.query));else{const a=t.views.get(r);a&&(o=o.concat(mo(a,n,i)),po(a)&&(t.views.delete(r),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!Ze(t)&&s.push(new(jg())(e._repo,e._path)),{removed:s,events:o}}function bl(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function bt(t,e){let n=null;for(const i of t.views.values())n=n||Ag(i,e);return n}function Cl(t,e){if(e._queryParams.loadsAllData())return ui(t);{const i=e._queryIdentifier;return t.views.get(i)}}function wl(t,e){return Cl(t,e)!=null}function Ze(t){return ui(t)!=null}function ui(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bn;function Bg(t){C(!Bn,"__referenceConstructor has already been defined"),Bn=t}function qg(){return C(Bn,"Reference.ts has not been loaded"),Bn}let zg=1;class vo{constructor(e){this.listenProvider_=e,this.syncPointTree_=new G(null),this.pendingWriteTree_=bg(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Gg(t,e,n,i,r){return cg(t.pendingWriteTree_,e,n,i,r),r?an(t,new rt(ul(),e,n)):[]}function gt(t,e,n=!1){const i=ug(t.pendingWriteTree_,e);if(dg(t.pendingWriteTree_,e)){let s=new G(null);return i.snap!=null?s=s.set(j(),!0):Ie(i.children,o=>{s=s.set(new U(o),!0)}),an(t,new jn(i.path,s,n))}else return[]}function di(t,e,n){return an(t,new rt(Ar(),e,n))}function Yg(t,e,n){const i=G.fromObject(n);return an(t,new Zt(Ar(),e,i))}function Kg(t,e){return an(t,new Xt(Ar(),e))}function Qg(t,e,n){const i=Wr(t,n);if(i){const r=Hr(i),s=r.path,o=r.queryId,l=we(s,e),a=new Xt(Lr(o),l);return Ur(t,s,a)}else return[]}function ir(t,e,n,i,r=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||wl(o,e))){const a=Ug(o,e,n,i);$g(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=a.removed;if(l=a.events,!r){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>Ze(f));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=Jg(h);for(let p=0;p<f.length;++p){const v=f[p],m=v.query,g=xl(t,v);t.listenProvider_.startListening(Wt(m),qn(t,m),g.hashFn,g.onComplete)}}}!d&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(Wt(e),null):c.forEach(h=>{const f=t.queryToTagMap.get(hi(h));t.listenProvider_.stopListening(Wt(h),f)}))}ev(t,c)}return l}function Xg(t,e,n,i){const r=Wr(t,i);if(r!=null){const s=Hr(r),o=s.path,l=s.queryId,a=we(o,e),c=new rt(Lr(l),a,n);return Ur(t,o,c)}else return[]}function Zg(t,e,n,i){const r=Wr(t,i);if(r){const s=Hr(r),o=s.path,l=s.queryId,a=we(o,e),c=G.fromObject(n),u=new Zt(Lr(l),a,c);return Ur(t,o,u)}else return[]}function _o(t,e,n,i=!1){const r=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(r,(h,f)=>{const p=we(h,r);s=s||bt(f,p),o=o||Ze(f)});let l=t.syncPointTree_.get(r);l?(o=o||Ze(l),s=s||bt(l,j())):(l=new Fg,t.syncPointTree_=t.syncPointTree_.set(r,l));let a;s!=null?a=!0:(a=!1,s=N.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((f,p)=>{const v=bt(p,j());v&&(s=s.updateImmediateChild(f,v))}));const c=wl(l,e);if(!c&&!e._queryParams.loadsAllData()){const h=hi(e);C(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=tv();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=Dr(t.pendingWriteTree_,r);let d=Hg(l,e,n,u,s,a);if(!c&&!o&&!i){const h=Cl(l,e);d=d.concat(nv(t,e,h))}return d}function Sl(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=we(o,e),c=bt(l,a);if(c)return c});return pl(r,e,s,n,!0)}function an(t,e){return El(e,t.syncPointTree_,null,Dr(t.pendingWriteTree_,j()))}function El(t,e,n,i){if(k(t.path))return Il(t,e,n,i);{const r=e.get(j());n==null&&r!=null&&(n=bt(r,j()));let s=[];const o=A(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const c=n?n.getImmediateChild(o):null,u=ml(i,o);s=s.concat(El(l,a,c,u))}return r&&(s=s.concat($r(r,t,i,n))),s}}function Il(t,e,n,i){const r=e.get(j());n==null&&r!=null&&(n=bt(r,j()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,c=ml(i,o),u=t.operationForChild(o);u&&(s=s.concat(Il(u,l,a,c)))}),r&&(s=s.concat($r(r,t,i,n))),s}function xl(t,e){const n=e.query,i=qn(t,n);return{hashFn:()=>(Mg(e)||N.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?Qg(t,n._path,i):Kg(t,n._path);{const s=Qp(r,n);return ir(t,n,null,s)}}}}function qn(t,e){const n=hi(e);return t.queryToTagMap.get(n)}function hi(t){return t._path.toString()+"$"+t._queryIdentifier}function Wr(t,e){return t.tagToQueryMap.get(e)}function Hr(t){const e=t.indexOf("$");return C(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new U(t.substr(0,e))}}function Ur(t,e,n){const i=t.syncPointTree_.get(e);C(i,"Missing sync point for query tag that we're tracking");const r=Dr(t.pendingWriteTree_,e);return $r(i,n,r,null)}function Jg(t){return t.fold((e,n,i)=>{if(n&&Ze(n))return[ui(n)];{let r=[];return n&&(r=bl(n)),Ie(i,(s,o)=>{r=r.concat(o)}),r}})}function Wt(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(qg())(t._repo,t._path):t}function ev(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=hi(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function tv(){return zg++}function nv(t,e,n){const i=e._path,r=qn(t,e),s=xl(t,n),o=t.listenProvider_.startListening(Wt(e),r,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(i);if(r)C(!Ze(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((c,u,d)=>{if(!k(c)&&u&&Ze(u))return[ui(u).query];{let h=[];return u&&(h=h.concat(bl(u).map(f=>f.query))),Ie(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<a.length;++c){const u=a[c];t.listenProvider_.stopListening(Wt(u),qn(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Br(n)}node(){return this.node_}}class qr{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=le(this.path_,e);return new qr(this.syncTree_,n)}node(){return Sl(this.syncTree_,this.path_)}}const iv=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},yo=function(t,e,n){if(!t||typeof t!="object")return t;if(C(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return rv(t[".sv"],e,n);if(typeof t[".sv"]=="object")return sv(t[".sv"],e);C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},rv=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:C(!1,"Unexpected server value: "+t)}},sv=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&C(!1,"Unexpected increment value: "+i);const r=e.node();if(C(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},ov=function(t,e,n,i){return zr(e,new qr(n,t),i)},av=function(t,e,n){return zr(t,new Br(e),n)};function zr(t,e,n){const i=t.getPriority().val(),r=yo(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=yo(o.getValue(),e,n);return l!==o.getValue()||r!==o.getPriority().val()?new ue(l,ye(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new ue(r))),o.forEachChild(J,(l,a)=>{const c=zr(a,e.getImmediateChild(l),n);c!==a&&(s=s.updateImmediateChild(l,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Yr(t,e){let n=e instanceof U?e:new U(e),i=t,r=A(n);for(;r!==null;){const s=Ct(i.node.children,r)||{children:{},childCount:0};i=new Gr(r,i,s),n=z(n),r=A(n)}return i}function Tt(t){return t.node.value}function Tl(t,e){t.node.value=e,rr(t)}function Ol(t){return t.node.childCount>0}function lv(t){return Tt(t)===void 0&&!Ol(t)}function fi(t,e){Ie(t.node.children,(n,i)=>{e(new Gr(n,t,i))})}function Pl(t,e,n,i){n&&!i&&e(t),fi(t,r=>{Pl(r,e,!0,i)}),n&&i&&e(t)}function cv(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ln(t){return new U(t.parent===null?t.name:ln(t.parent)+"/"+t.name)}function rr(t){t.parent!==null&&uv(t.parent,t.name,t)}function uv(t,e,n){const i=lv(n),r=Ve(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,rr(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,rr(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=/[\[\].#$\/\u0000-\u001F\u007F]/,hv=/[\[\].#$\u0000-\u001F\u007F]/,Ai=10*1024*1024,Rl=function(t){return typeof t=="string"&&t.length!==0&&!dv.test(t)},Nl=function(t){return typeof t=="string"&&t.length!==0&&!hv.test(t)},fv=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nl(t)},bo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Sr(t)||t&&typeof t=="object"&&Ve(t,".sv")},kl=function(t,e,n,i){i&&e===void 0||Kr(ar(t,"value"),e,n)},Kr=function(t,e,n){const i=n instanceof U?new Pm(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+et(i));if(typeof e=="function")throw new Error(t+"contains a function "+et(i)+" with contents = "+e.toString());if(Sr(e))throw new Error(t+"contains "+e.toString()+" "+et(i));if(typeof e=="string"&&e.length>Ai/3&&Gn(e)>Ai)throw new Error(t+"contains a string greater than "+Ai+" utf8 bytes "+et(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Ie(e,(o,l)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Rl(o)))throw new Error(t+" contains an invalid key ("+o+") "+et(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Rm(i,o),Kr(t,l,i),Nm(i)}),r&&s)throw new Error(t+' contains ".value" child '+et(i)+" in addition to actual children.")}},Qr=function(t,e,n,i){if(!Nl(n))throw new Error(ar(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},pv=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Qr(t,e,n)},mv=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Rl(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!fv(n))throw new Error(ar(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ml(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!Or(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function Al(t,e,n){Ml(t,n),Ll(t,i=>Or(i,e))}function lt(t,e,n){Ml(t,n),Ll(t,i=>ke(i,e)||ke(e,i))}function Ll(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(vv(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function vv(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Ft&&_e("event: "+n.toString()),sn(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="repo_interrupt",yv=25;class bv{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vn(),this.transactionQueueTree_=new Gr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Cv(t,e,n){if(t.stats_=xr(t.repoInfo_),t.forceRestClient_||em())t.server_=new Fn(t.repoInfo_,(i,r,s,o)=>{Co(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>wo(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{he(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new He(t.repoInfo_,e,(i,r,s,o)=>{Co(t,i,r,s,o)},i=>{wo(t,i)},i=>{Sv(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=sm(t.repoInfo_,()=>new ig(t.stats_,t.server_)),t.infoData_=new Zm,t.infoSyncTree_=new vo({startListening:(i,r,s,o)=>{let l=[];const a=t.infoData_.getNode(i._path);return a.isEmpty()||(l=di(t.infoSyncTree_,i._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Xr(t,"connected",!1),t.serverSyncTree_=new vo({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(l,a)=>{const c=o(l,a);lt(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function wv(t){const n=t.infoData_.getNode(new U(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Dl(t){return iv({timestamp:wv(t)})}function Co(t,e,n,i,r){t.dataUpdateCount++;const s=new U(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const a=In(n,c=>ye(c));o=Zg(t.serverSyncTree_,s,a,r)}else{const a=ye(n);o=Xg(t.serverSyncTree_,s,a,r)}else if(i){const a=In(n,c=>ye(c));o=Yg(t.serverSyncTree_,s,a)}else{const a=ye(n);o=di(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Jr(t,s)),lt(t.eventQueue_,l,o)}function wo(t,e){Xr(t,"connected",e),e===!1&&Iv(t)}function Sv(t,e){Ie(e,(n,i)=>{Xr(t,n,i)})}function Xr(t,e,n){const i=new U("/.info/"+e),r=ye(n);t.infoData_.updateSnapshot(i,r);const s=di(t.infoSyncTree_,i,r);lt(t.eventQueue_,i,s)}function Ev(t){return t.nextWriteId_++}function Iv(t){Fl(t,"onDisconnectEvents");const e=Dl(t),n=Vn();Xi(t.onDisconnect_,j(),(r,s)=>{const o=ov(r,s,t.serverSyncTree_,e);cl(n,r,o)});let i=[];Xi(n,j(),(r,s)=>{i=i.concat(di(t.serverSyncTree_,r,s));const o=Nv(t,r);Jr(t,o)}),t.onDisconnect_=Vn(),lt(t.eventQueue_,j(),i)}function xv(t,e,n){let i;A(e._path)===".info"?i=_o(t.infoSyncTree_,e,n):i=_o(t.serverSyncTree_,e,n),Al(t.eventQueue_,e._path,i)}function Tv(t,e,n){let i;A(e._path)===".info"?i=ir(t.infoSyncTree_,e,n):i=ir(t.serverSyncTree_,e,n),Al(t.eventQueue_,e._path,i)}function Ov(t){t.persistentConnection_&&t.persistentConnection_.interrupt(_v)}function Fl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_e(n,...e)}function Vl(t,e,n){return Sl(t.serverSyncTree_,e,n)||N.EMPTY_NODE}function Zr(t,e=t.transactionQueueTree_){if(e||pi(t,e),Tt(e)){const n=$l(t,e);C(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&Pv(t,ln(e),n)}else Ol(e)&&fi(e,n=>{Zr(t,n)})}function Pv(t,e,n){const i=n.map(c=>c.currentWriteId),r=Vl(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const u=n[c];C(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=we(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,c=>{Fl(t,"transaction put response",{path:a.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(gt(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();pi(t,Yr(t.transactionQueueTree_,e)),Zr(t,t.transactionQueueTree_),lt(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)sn(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Oe("transaction at "+a.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Jr(t,e)}},o)}function Jr(t,e){const n=jl(t,e),i=ln(n),r=$l(t,n);return Rv(t,r,i),i}function Rv(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],c=we(n,a.path);let u=!1,d;if(C(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,d=a.abortReason,r=r.concat(gt(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=yv)u=!0,d="maxretry",r=r.concat(gt(t.serverSyncTree_,a.currentWriteId,!0));else{const h=Vl(t,a.path,o);a.currentInputSnapshot=h;const f=e[l].update(h.val());if(f!==void 0){Kr("transaction failed: Data returned ",f,a.path);let p=ye(f);typeof f=="object"&&f!=null&&Ve(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=a.currentWriteId,g=Dl(t),b=av(p,h,g);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=b,a.currentWriteId=Ev(t),o.splice(o.indexOf(m),1),r=r.concat(Gg(t.serverSyncTree_,a.path,b,a.currentWriteId,a.applyLocally)),r=r.concat(gt(t.serverSyncTree_,m,!0))}else u=!0,d="nodata",r=r.concat(gt(t.serverSyncTree_,a.currentWriteId,!0))}lt(t.eventQueue_,n,r),r=[],u&&(e[l].status=2,function(h){setTimeout(h,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(d),!1,null))))}pi(t,t.transactionQueueTree_);for(let l=0;l<i.length;l++)sn(i[l]);Zr(t,t.transactionQueueTree_)}function jl(t,e){let n,i=t.transactionQueueTree_;for(n=A(e);n!==null&&Tt(i)===void 0;)i=Yr(i,n),e=z(e),n=A(e);return i}function $l(t,e){const n=[];return Wl(t,e,n),n.sort((i,r)=>i.order-r.order),n}function Wl(t,e,n){const i=Tt(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);fi(e,r=>{Wl(t,r,n)})}function pi(t,e){const n=Tt(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Tl(e,n.length>0?n:void 0)}fi(e,i=>{pi(t,i)})}function Nv(t,e){const n=ln(jl(t,e)),i=Yr(t.transactionQueueTree_,e);return cv(i,r=>{Li(t,r)}),Li(t,i),Pl(i,r=>{Li(t,r)}),n}function Li(t,e){const n=Tt(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(C(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(gt(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Tl(e,void 0):n.length=s+1,lt(t.eventQueue_,ln(e),r);for(let o=0;o<i.length;o++)sn(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function Mv(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Oe(`Invalid query segment '${n}' in query '${t}'`)}return e}const So=function(t,e){const n=Av(t),i=n.namespace;n.domain==="firebase.com"&&qe(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&qe("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||qp();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ha(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new U(n.pathString)}},Av=function(t){let e="",n="",i="",r="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=kv(t.substring(u,d)));const h=Mv(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:a,domain:n,subdomain:i,secure:o,scheme:l,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+he(this.snapshot.exportVal())}}class Dv{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return k(this._path)?null:Xa(this._path)}get ref(){return new Je(this._repo,this._path)}get _queryIdentifier(){const e=so(this._queryParams),n=Er(e);return n==="{}"?"default":n}get _queryObject(){return so(this._queryParams)}isEqual(e){if(e=Jt(e),!(e instanceof ct))return!1;const n=this._repo===e._repo,i=Or(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Om(this._path)}}function Hl(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function mi(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ue){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==it)throw new Error(i);if(typeof e!="string")throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==ze)throw new Error(i);if(typeof n!="string")throw new Error(r)}}else if(t.getIndex()===J){if(e!=null&&!bo(e)||n!=null&&!bo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(C(t.getIndex()instanceof Nr||t.getIndex()===ol,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ul(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Je extends ct{constructor(e,n){super(e,n,new Mr,!1)}get parent(){const e=Ja(this._path);return e===null?null:new Je(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class zn{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new U(e),i=Eo(this.ref,e);return new zn(this._node.getChild(n),i,J)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new zn(r,Eo(this.ref,i),J)))}hasChild(e){const n=new U(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function n_(t,e){return t=Jt(t),t._checkNotDeleted("ref"),t._root}function Eo(t,e){return t=Jt(t),A(t._path)===null?pv("child","path",e):Qr("child","path",e),new Je(t._repo,le(t._path,e))}class es{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new Lv("value",this,new zn(e.snapshotNode,new Je(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Dv(this,e,n):null}matches(e){return e instanceof es?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Vv(t,e,n,i,r){const s=new Fv(n,void 0),o=new es(s);return xv(t._repo,t,o),()=>Tv(t._repo,t,o)}function i_(t,e,n,i){return Vv(t,"value",e)}class gi{}class jv extends gi{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){kl("endAt",this._value,e._path,!0);const n=Xm(e._queryParams,this._value,this._key);if(Ul(n),mi(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ct(e._repo,e._path,n,e._orderByCalled)}}function r_(t,e){return new jv(t,e)}class $v extends gi{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){kl("startAfter",this._value,e._path,!1);const n=Qm(e._queryParams,this._value,this._key);if(Ul(n),mi(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ct(e._repo,e._path,n,e._orderByCalled)}}function s_(t,e){return new $v(t,e)}class Wv extends gi{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Hl(e,"orderByChild");const n=new U(this._path);if(k(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Nr(n),r=ll(e._queryParams,i);return mi(r),new ct(e._repo,e._path,r,!0)}}function o_(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Qr("orderByChild","path",t),new Wv(t)}class Hv extends gi{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Hl(e,"orderByKey");const n=ll(e._queryParams,Ue);return mi(n),new ct(e._repo,e._path,n,!0)}}function a_(){return new Hv}function l_(t,...e){let n=Jt(t);for(const i of e)n=i._apply(n);return n}Vg(Je);Bg(Je);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="FIREBASE_DATABASE_EMULATOR_HOST",sr={};let Bv=!1;function qv(t,e,n,i){t.repoInfo_=new Ha(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function zv(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||qe("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_e("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=So(s,r),l=o.repoInfo,a;typeof process<"u"&&$s&&(a=$s[Uv]),a?(s=`http://${a}?ns=${l.namespace}`,o=So(s,r),l=o.repoInfo):o.repoInfo.secure;const c=new nm(t.name,t.options,e);mv("Invalid Firebase Database URL",o),k(o.path)||qe("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Yv(l,t,c,new tm(t.name,n));return new Kv(u,t)}function Gv(t,e){const n=sr[e];(!n||n[t.key]!==t)&&qe(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Ov(t),delete n[t.key]}function Yv(t,e,n,i){let r=sr[e.name];r||(r={},sr[e.name]=r);let s=r[t.toURLString()];return s&&qe("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new bv(t,Bv,n,i),r[t.toURLString()]=s,s}class Kv{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Cv(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Je(this._repo,j())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Gv(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qe("Cannot call "+e+" on a deleted database.")}}function c_(t=ic(),e){const n=tc(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=nc("database");i&&Qv(n,...i)}return n}function Qv(t,e,n,i={}){t=Jt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&qe("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qe('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new En(En.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:rc(i.mockUserToken,t.app.options.projectId);s=new En(o)}qv(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){jp(gc),sc(new oc("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return zv(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),ss(Ws,Hs,t),ss(Ws,Hs,"esm2017")}He.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};He.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Xv();const u_=t=>{const e=y.useRef();return y.useEffect(()=>{e.current=t}),e.current};export{t_ as F,e_ as L,Jv as P,i_ as a,o_ as b,r_ as e,c_ as g,a_ as o,l_ as q,n_ as r,s_ as s,u_ as u};
